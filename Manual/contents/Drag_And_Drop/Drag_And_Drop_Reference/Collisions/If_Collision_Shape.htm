<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Si forme de collision</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page qui explique l&#39;action If Collision Shape" />
  <meta name="rh-index-keywords" content="DnD ™ - Si forme de collision" />
  <meta name="search-keywords" content="Si forme de collision" />
</head>
<body><!--<div class="body-scroll" style="top: 150px;">--><h1><img alt="If Collision Shape Icon" class="icon" height="32" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/i_Collision_Shape.png" width="32" /> Si forme de collision</h1><p> Cette action est utilisée pour vérifier et voir s&#39;il y a une collision avec une instance d&#39;un objet donné dans une zone formée donnée ou le long d&#39;une ligne. Vous donnez la forme (rectangle, ellipse ou ligne), l&#39;objet à vérifier, puis fournissez les coordonnées des coins supérieur gauche et inférieur droit de la forme utilisée, ou dans le cas d&#39;une ligne, le début et positions finales. Il peut s&#39;agir de positions absolues dans la salle de jeu ou de positions relatives à l&#39;instance exécutant l&#39;action. Vous pouvez voir comment cela fonctionne dans l&#39;image ci-dessous:</p><p><img alt="Example of different collision shapes" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/collision_shape_example.png" /> Comme vous pouvez le voir, les résultats dépendront du masque de collision de l&#39;instance en cours de vérification, ce qui signifie que l&#39;instance de l&#39;objet que vous recherchez <i>doit</i> avoir un sprite assigné au <tt>sprite_index</tt>, ou un sprite affecté au <tt>mask_index</tt>. Si ce n&#39;est pas le cas, il ne sera pas détecté par ces fonctions, qu&#39;il dessine ou non un sprite. Il est à noter que toute instance qui tombe complètement dans les limites définies pour l&#39;ellipse ou la forme de rectangle renverra également une collision. L&#39;action évaluera à <tt>true</tt> si une collision est détectée, ou <tt>false</tt> sinon, bien que vous puissiez également cocher l&#39; <b>indicateur Non</b> pour vérifier s&#39;il n&#39;y a <i>pas de</i> collision avec la zone formée donnée, et l&#39;action sera alors évaluée uniquement comme <tt>true</tt> si <i>aucune</i> collision n&#39;est trouvée, sinon il sera évalué comme <tt>false</tt>. Vous pouvez également définir l&#39; <b>option Exclude Self</b> pour exclure l&#39;instance appelante de la vérification de collision.</p><p> Ensuite, vous pouvez cocher / décocher l&#39;option <b>Liste de retour</b>. Si vous cochez cette case, l&#39;action créera et remplira une <a href="../Data_Structures/Data_Structure_Actions.htm">liste</a><span> </span>structure de données avec <i>toutes les</i> instances en collision avec la forme et définissez la <b>variable Target</b> sur l&#39;ID de liste DS. Lorsqu&#39;elle n&#39;est pas cochée, elle ne définira la <b>variable Target que</b> sur une valeur inférieure à 0 lorsqu&#39;aucune collision n&#39;est détectée, ou la valeur d&#39;ID unique de l&#39; <i>une</i> des instances de la collision (notez que si plusieurs instances sont en collision, vous n&#39;avez aucun moyen de savoir quel ID d&#39;instance sera retourné lorsque vous n&#39;utilisez pas de liste).</p><p> Si vous avez choisi de renvoyer une liste - et que la variable Target n&#39;est <i>pas</i> définie sur <b>Temp</b> -, vous pouvez également sélectionner l&#39;option <b>Free Target.</b> Lorsqu&#39;il est réglé sur <tt>true</tt>, la liste contenue dans la variable cible sera détruite et une nouvelle liste créée (et renvoyée à la variable cible) à chaque fois que vous appelez l&#39;action. De cette façon, vous pouvez réutiliser la même variable sans vous soucier des fuites de mémoire, car si vous ne cochez <i>pas</i> <b>l&#39;option Free Target</b>, vous devenez responsable de la destruction de la liste avant de réutiliser la variable dans l&#39;action. Notez que, <i>que</i> cette option soit cochée ou non, si vous avez défini l&#39;action sur <b>Liste de retour</b>, la variable cible contiendra <i>toujours un ID de liste</i>, et en tant que telle, elle devra être libérée lorsque l&#39;instance est détruite ou la salle se termine (vous pouvez utiliser l&#39; <a href="../../../The_Asset_Editors/Object_Properties/Object_Events.htm"><b>événement Clean Up</b></a> pour cela, par exemple, avec la <a href="../Data_Structures/Free_Data_Structure.htm">structure de données gratuite</a><span> </span>action). Il est à noter que vous pouvez définir l&#39; <b>option Free Target</b> pour utiliser une variable prédéfinie ou une expression et ainsi contrôler le moment où la structure de données de la liste est libérée en définissant la variable ailleurs (ou en ayant des résultats différents pour l&#39;expression) tant qu&#39;elle évalue à <tt>true</tt> /<tt>false</tt>.</p><p> Enfin, vous fournissez la <b>variable cible</b> que vous souhaitez contenir la valeur retournée ou l&#39;ID de liste. Si vous marquez la variable Target pour contenir la valeur retournée comme étant une <b>variable Temp</b> (locale), alors l&#39;action créera cette variable pour ne conserver la valeur de retour <i>que</i> jusqu&#39;à la fin de l&#39;événement, dans ce cas l&#39;option Free Target ne fait rien et vous serez responsable de la destruction de la liste DS si cette option a été cochée. Si aucune variable cible n&#39;est fournie et que l&#39; <b>option Liste de retour</b> est cochée, aucune liste ne sera créée.</p><p class="note"> <b>IMPORTANT!</b> Les collisions ne seront enregistrées que pour les instances qui ont un masque de collision valide, c&#39;est-à-dire: elles ont un sprite assigné au <tt>sprite_index</tt>, ou un sprite affecté au <tt>mask_index</tt>. Si les instances de l&#39;objet recherché dans cette action n&#39;ont pas de masque de collision, la collision ne sera pas détectée, quel que soit le dessin de l&#39;instance à ce moment-là.</p><p> Notez que pour ajouter des actions dans un &quot;<span class="inline">if</span> &quot;, ils doivent être déposés sur le <i>côté</i> de l&#39;action, comme indiqué dans l&#39;image ci-dessous:</p><p><img alt="If Collision Shape drop actions" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/If_Collision_Shape.png" /></p><p></p><h4> Syntaxe de l&#39;action:</h4><p><img alt="If Collision Shape Action" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/a_Collision_Shape.png" /></p><h4> Arguments:</h4><table><tbody><tr><th> Argument</th><th> Description</th></tr><tr><td> <span class="notranslate">Shape</span></td><td> La forme à utiliser</td></tr><tr><td> <span class="notranslate">Object</span></td><td> L&#39;objet pour vérifier les instances de</td></tr><tr><td> <span class="notranslate">x1</span></td><td> La position x à partir de laquelle commencer</td></tr><tr><td> <span class="notranslate">y1</span></td><td> La position y à partir de laquelle commencer</td></tr><tr><td> <span class="notranslate">x2</span></td><td> La position x pour terminer à</td></tr><tr><td> <span class="notranslate">y2</span></td><td> La position y pour terminer à</td></tr><tr><td> <span class="notranslate">Free Target</span></td><td> Peut être défini sur une variable ou une expression, ou sur <tt>true</tt> /<tt>false</tt> pour contrôler la libération de la mémoire de liste lors de la réutilisation d&#39;une variable de liste</td></tr><tr><td> <span class="notranslate">Target</span></td><td> La variable à cibler pour la valeur de retour de l&#39;action</td></tr></tbody></table><p></p><h4> Exemple:</h4><p><img alt="If Collision Shape Example" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/e_Collision_Shape.png" /> Le code de bloc d&#39;action ci-dessus vérifie une collision avec toutes les instances de l&#39;objet &quot; <span class="inline">obj_Enemy</span> &quot;dans un cercle de 100 pixels autour de la position des instances appelantes. L&#39;action génère une liste de toutes les instances trouvées en collision et stocke l&#39;ID de la liste dans la variable Target. Si l&#39;action est évaluée à <tt>true</tt> puis la liste est bouclée et chaque instance avec son ID stocké dans la liste a son &quot;<span class="inline">hp</span> &quot;variable réduite de 1. La liste DS est alors libérée. </p><p></p><p></p><p></p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Retour: <a href="Collision_Actions.htm">Actions de collision</a></div><div style="float:right"> Suivant: <a href="If_Collision_Point.htm">Si le point de collision</a></div></div></div><h5> <span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Tous droits réservés</span></h5>
  </div>
  <!-- KEYWORDS
Action - If Collision Shape
-->
  <!-- TAGS
action_if_collision_shape
-->
</body>
</html>