<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Si la forme de la collision</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page that explains the If Collision Shape action" />
  <meta name="rh-index-keywords" content="DnD™ Action - If Collision Shape" />
  <meta name="search-keywords" content="If Collision Shape" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><img alt="If Collision Shape Icon" class="icon" height="32" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/i_Collision_Shape.png" width="32"> Si la forme de la collision</h1>
  <p>Cette action est utilisée pour vérifier s'il y a une collision avec une instance d'un objet donné dans une zone de forme donnée ou le long d'une ligne. Vous donnez la forme (rectangle, ellipse ou ligne), l'objet à vérifier, puis vous fournissez les coordonnées pour
    les coins supérieur gauche et inférieur droit de la forme utilisée, ou dans le cas d'une ligne, les positions de début et de fin. Il peut s'agir de positions absolues dans la salle de jeu ou de positions relatives à l'instance qui effectue l'action. Vous pouvez voir comment
    cela fonctionne dans l'image ci-dessous :</p>
  <p><img alt="Example of different collision shapes" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/collision_shape_example.png">Comme vous pouvez le constater, les résultats dépendront du masque de collision de l'instance recherchée.
    recherchée, ce qui signifie que l'instance de l'objet que vous recherchez <i>doit</i> avoir un sprite assigné au <tt>sprite_index</tt>, ou un sprite assigné au <tt>mask_index</tt>. Si ce n'est pas le cas, il ne sera pas détecté par ces fonctions,
    qu'il dessine un sprite ou non. Il convient de noter que toute instance qui se trouve entièrement à l'intérieur des limites définies pour la forme ellipse ou rectangle renverra également une collision. L'action sera évaluée à <tt>true</tt> si
    une collision est détectée, ou <tt>faux</tt> sinon, bien que vous puissiez également vérifier le drapeau <b>Not</b> pour vérifier s'il <i>n'y a pas</i> de collision avec la zone de forme donnée, et l'action ne sera alors évaluée comme <tt>vraie</tt> que si <i>aucune</i> collision <i>n'</i> est trouvée.
    n'est trouvée, sinon elle sera évaluée comme <tt>fausse</tt>. Vous pouvez également définir l'option <b>Exclude Self</b> pour exclure l'instance appelante du contrôle de collision.</p>
  <p>Ensuite, vous pouvez cocher/décocher l'option de <b>renvoi de la liste</b>. Si vous cochez cette option, l'action créera et remplira une structure de données de <a href="../Data_Structures/Data_Structure_Actions.htm">liste</a><span> </span>avec <i>toutes les substances</i>en collision avec la forme.
    avec la forme et définira la variable <b>cible</b> à l'ID de la liste DS. Si cette option n'est pas cochée, la variable <b>Target</b> sera uniquement définie sur une valeur inférieure à 0 si aucune collision n'est détectée, ou sur la valeur d'identification unique de l'<i>une</i> des instances de la collision.
    (notez que si plusieurs instances sont en collision, vous n'avez aucun moyen de savoir quel ID d'instance sera renvoyé si vous n'utilisez pas de liste).</p>
  <p>Si vous avez choisi de renvoyer une liste - et que la variable Target <i>n'</i> est <i>pas</i> définie comme <b>Temp</b> - vous pouvez également sélectionner l'option <b>Free Target</b>. Lorsqu'elle est définie à <tt>true</tt>, la liste contenue dans la variable cible sera détruite et une nouvelle liste sera créée (et retournée à la variable cible) chaque fois que vous appelez l'action.
    une nouvelle liste sera créée (et renvoyée à la variable cible) chaque fois que vous appelez l'action. De cette façon, vous pouvez réutiliser la même variable sans vous soucier des fuites de mémoire, car si vous <i>ne</i> cochez <i>pas</i> l'option <b>Free Target</b>, vous devenez responsable de la destruction de la liste avant d'utiliser la variable.
    de détruire la liste avant de réutiliser la variable dans l'action. Notez qu'<i>indépendamment du</i> fait que cette option soit cochée ou non, si vous avez défini l'action sur <b>Retourner une liste</b>, alors la variable cible <i>contiendra toujours un ID de liste</i>,
    et en tant que telle, elle devra être libérée lorsque l'instance est détruite ou que la room se termine (vous pouvez utiliser l'événement <a href="../../../The_Asset_Editors/Object_Properties/Object_Events.htm"><b>Nettoyage</b></a> pour cela, par exemple, avec l'action <a href="../Data_Structures/Free_Data_Structure.htm">Free Data Structure</a><span> </span>).
    Il est intéressant de noter que vous pouvez définir l'option <b>Free Target</b> pour utiliser une variable prédéfinie ou une expression et ainsi contrôler le moment où la structure de données de la liste est libérée en définissant la variable ailleurs (ou en ayant différents résultats pour l'expression)
    à condition que l'expression soit évaluée à <tt>true/false</tt>.</p>
  <p>Enfin, vous fournissez la variable <b>cible</b> qui doit contenir la valeur retournée ou l'ID de la liste. Si vous marquez la variable cible devant contenir la valeur renvoyée comme étant une variable <b>temporaire</b> (locale), l'action créera cette variable pour contenir la valeur renvoyée uniquement jusqu'à la fin de l'événement.
    Dans ce cas, l'option Free Target <i>ne</i> fait rien et vous serez responsable de la destruction de la liste DS si cette option a été cochée. Si aucune variable cible n'est fournie et que l'option <b>Liste de retour</b> est cochée, aucune liste ne sera créée.</p>
  <p class="note"><b>IMPORTANT !</b> Les collisions ne seront enregistrées que pour les instances qui ont un masque de collision valide, c'est-à-dire qu'elles ont un sprite assigné au <tt>sprite_index</tt>, ou un sprite assigné au <tt>mask_index</tt>. Si les instances de l'objet contrôlé par cette action
    vérifiées dans cette action n'ont pas de masque de collision, la collision ne sera pas détectée, indépendamment de ce que l'instance dessine à ce moment-là.</p>
  <p>Notez que pour ajouter des actions dans un bloc &quot;<span class="inline">if</span>&quot;, elles doivent être déposées sur le côté de <i>l'</i> action, comme le montre l'image ci-dessous :</p>
  <p><img alt="If Collision Shape drop actions" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/If_Collision_Shape.png" /></p>
  <p> </p>
  <h4>Syntaxe de l'action :</h4>
  <p><img alt="If Collision Shape Action" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/a_Collision_Shape.png" /></p>
  <h4>Arguments :</h4>
  <table>
    <tbody>
      <tr>
        <th>Arguments</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>Forme</td>
        <td>La forme à utiliser</td>
      </tr>
      <tr>
        <td>Objet</td>
        <td>L'objet à vérifier pour les instances de</td>
      </tr>
      <tr>
        <td>x1</td>
        <td>La position x de départ</td>
      </tr>
      <tr>
        <td>y1</td>
        <td>La position y à partir de laquelle il faut commencer</td>
      </tr>
      <tr>
        <td>x2</td>
        <td>La position x à laquelle il faut terminer</td>
      </tr>
      <tr>
        <td>y2</td>
        <td>La position y à laquelle il faut terminer</td>
      </tr>
      <tr>
        <td>Cible libre</td>
        <td>Peut être défini comme une variable ou une expression, ou défini comme <tt>vrai/faux</tt> pour contrôler la libération de la mémoire de la liste lors de la réutilisation d'une variable de liste.</td>
      </tr>
      <tr>
        <td>Cible</td>
        <td>La variable à cibler pour la valeur de retour de l'action</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>Exemple :</h4>
  <p><img alt="If Collision Shape Example" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/e_Collision_Shape.png">Le code du bloc d'action ci-dessus recherche une collision avec toute instance de l'objet &quot;
    <span class="inline">obj_Enemy</span> &quot; dans un cercle de 100px autour de la position de l'instance appelante. L'action génère une liste de toutes les instances trouvées en collision et stocke l'ID de la liste dans la variable Target. Si la valeur de l'action est
   <tt>true</tt>, la liste est parcourue en boucle et chaque instance dont l'ID est stocké dans la liste voit sa variable &quot;<span class="inline">hp</span>&quot; réduite de 1. La liste DS est ensuite libérée.</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Retour : <a href="Collision_Actions.htm">Actions de collision</a></div>
        <div style="float:right">Suivant : <a href="If_Collision_Point.htm">Si Point de Collision</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Tous droits réservés</span></h5>
  </div>
  <!-- KEYWORDS
Action - If Collision Shape
-->
  <!-- TAGS
action_if_collision_shape
-->
</body>
</html>