<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Notifications push</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page détaillant l&#39;événement asynchrone de notification push." />
  <meta name="rh-index-keywords" content="Objets - Événement de notification push asynchrone" />
  <meta name="search-keywords" content="notifications push,pousser,ev_push_notification" />
  <link rel="stylesheet" type="text/css" href="../../../assets/css/default.css" />
</head>
<body><!--<div class="body-scroll" style="top: 150px;">--><h1> Notifications push</h1><p><img alt="Push Notification Event" class="center" src="../../../assets/Images/Asset_Editors/Async_Push.png" /> L&#39;événement de notification push est celui qui est déclenché par le <a class="glossterm" data-glossterm="rappeler" href="#">rappel</a> des <a href="../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/Push_Notifications/Push_Notifications.htm"><strong>notifications push</strong></a> sur le système d&#39;exploitation de l&#39;appareil, soit à partir d&#39;une source locale à l&#39;aide de la fonction <a href="../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/Push_Notifications/push_local_notification.htm"><span class="inline">push_local_notification()</span></a>, ou depuis une source distante (ex: votre serveur). Il génère une <a href="../../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm">carte DS</a> qui est exclusive à cet événement et est stockée dans la variable spéciale <a href="../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm"> <span class="inline">async_load</span></a> (veuillez consulter les fonctions individuelles qui déclenchent des événements asynchrones pour des exemples de code qui expliquent l&#39;utilisation de cet événement plus en détail). Cette carte DS a les clés suivantes:</p><ul class="dropspotlist"><li class="dropspot"> &quot;<span class="inline">type</span> &quot;: La valeur peut être&quot; local &quot;pour une notification locale de périphérique,&quot; remote &quot;pour une notification à distance ou&quot; register &quot;pour un enregistrement de notification à distance.</li><li class="dropspot"> &quot;<span class="inline">status</span> &quot;: La valeur sera&quot; 1 &quot;en cas de succès ou&quot; 0 &quot;en cas d&#39;erreur.</li></ul><p> Il peut y avoir des entrées de clé supplémentaires basées sur le «type» renvoyé et la valeur «statut». Pour &quot;status&quot;, si une erreur a été renvoyée (&quot;0&quot;), alors vous aurez également la clé suivante:</p><ul class="dropspotlist"><li class="dropspot"> &quot;<span class="inline">error</span> &quot;: Contient les détails de l&#39;erreur reçue.</li></ul><p> Si la valeur &quot;status&quot; est 1 (c&#39;est-à-dire: aucune erreur), la carte DS contiendra les valeurs supplémentaires suivantes, en fonction de la valeur de la clé &quot;type&quot;:</p><ul class="dropspotlist"><li class="dropspot"> &quot;<span class="inline">reg_id</span> &quot;: Si le&quot; type &quot;reçu était&quot; enregistrer &quot;, cette clé contiendra l&#39;ID d&#39;enregistrement de l&#39;appareil pour les notifications à distance.</li><li class="dropspot"> &quot;<span class="inline">data</span> &quot;: Si le&quot; type &quot;reçu était&quot; local &quot;ou&quot; distant &quot;, cette touche contiendra la charge utile de chaîne que vous avez définie lorsque vous avez appelé la fonction de notification.</li></ul><p> Pour mieux comprendre cela, nous avons créé un petit exemple d&#39;extrait ci-dessous que vous pourrez consulter. Dans cet exemple, nous enverrons une notification push locale en utilisant le code suivant:</p><p class="code">var fireTime = date_inc_day(date_current_datetime(), 1);<br/> var data = &quot;daily_reward&quot;;<br/> push_local_notification(fireTime, &quot;Ahoy!&quot;, &quot;Catch The Haggis Has A Present&quot;, data);</p><p> Cela définira une minuterie pour &quot;pousser&quot; une notification à l&#39;appareil lorsqu&#39;un jour s&#39;est écoulé. À la fin de la journée, si votre jeu est en arrière-plan ou n&#39;est pas en cours d&#39;exécution, une notification sera affichée à l&#39;utilisateur avec le titre et le message donnés (sur <span class="notranslate">iOS</span>, le nom du jeu est affiché et le titre est ignoré), puis un événement de notification push asynchrone sera appelé. Notez que si le jeu est au premier plan au moment de la notification, il <em>ne</em> sera pas affiché, <strong>mais l&#39;événement asynchrone se déclenchera toujours</strong>. Dans le cas lui-même, vous géreriez le rappel quelque chose comme ceci: </p><p class="code">var type = ds_map_find_value(async_load, &quot;type&quot;);<br/> var status = ds_map_find_value(async_load, &quot;status&quot;);<br/> if status == 0<br/>    {<br/>    //error of some kind<br/>    var error = ds_map_find_value(async_load, &quot;error&quot;);<br/>     show_debug_message(&quot;error=&quot; + string(error));<br/>    }<br/> else
    <br/>    {<br/>    if type == &quot;register&quot;<br/>       {<br/>       global.reg_id = ds_map_find_value(async_load, &quot;reg_id&quot;);<br/>       }<br/>    else<br/>     {<br/>       var data = ds_map_find_value(async_load, &quot;data&quot;);<br/>             if data == &quot;daily_reward&quot;<br/>          {<br/>          global.Gold += 1000;<br/>          }<br/>       }<br/>    }</p><p></p><p></p><p></p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Retour: <a href="../Async_Events.htm">Événements asynchrones</a></div><div style="float:right"> Suivant: <a href="Save_Load.htm">Enregistrer / charger</a></div></div></div><h5> <span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Tous droits réservés</span></h5>
  </div>
  <!-- KEYWORDS
Asynchronous Push Notification Event
ev_push_notification
-->
  <!-- TAGS
ev_push_notification
-->
</body>
</html>