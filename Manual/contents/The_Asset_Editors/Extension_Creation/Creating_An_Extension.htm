<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Créer une extension</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page détaillant comment créer une extension générique" />
  <meta name="rh-index-keywords" content="Extensions - Création d&#39;une extension" />
  <meta name="search-keywords" content="création d&#39;extensions" />
</head>
<body><!--<div class="body-scroll" style="top: 150px;">--><h1> Créer une extension</h1><p> Pour créer une extension, vous devez d&#39;abord faire un clic droit<img alt="RMB Icon" class="icon" src="../../assets/Images/Icons/Icon_RMB.png" /> dans le navigateur de ressources et sélectionnez <strong>Créer une extension</strong>. Cela ouvrira la fenêtre principale des propriétés de l&#39;extension:</p><p><img alt="Extension Properties" class="center" src="../../assets/Images/Asset_Editors/Editor_Extensions.png" /> Ceci est maintenant prêt pour que vous ajoutiez les fichiers et fonctions requis, et vous pouvez également donner un nom à l&#39;extension ici (en suivant la convention habituelle de seulement lettres / chiffres et pas de symboles spéciaux sauf le tiret &quot;_&quot;). Vous pouvez également définir le numéro de version de l&#39;extension si vous le souhaitez.</p><p> Pour ajouter un fichier à la nouvelle extension, vous devez cliquer sur l&#39;icône de menu<img alt="Estension Options Icon" class="icon" src="../../assets/Images/Icons/Icon_ExtensionMenu.png" /> et sélectionnez un fichier d&#39;espace réservé ou le fichier réel requis pour la plate-forme cible:</p><p class="dropspot"><img alt="Add Files To An Extension" class="center" src="../../assets/Images/Asset_Editors/Editor_Extensions_Files.png" /></p><p> Un espace réservé «générique» est un fichier qui peut être de n&#39;importe quel type, à l&#39;exception de ceux requis par les plates-formes spécifiques (donc non <span class="inline">DLL</span> ou <span class="inline">SO </span> fichiers, par exemple), et il ne sera utilisé que comme fichier &quot;linker&quot; pour connecter un ensemble de fonctions ou de constantes avec l&#39;extension donnée (en général, il n&#39;est utilisé qu&#39;avec <span class="notranslate">Android</span> <span class="notranslate">iOS</span> et Android, ce qui est expliqué dans les sections ci-dessous pour ces cibles). Vous pouvez également ajouter des <span class="notranslate">GML</span> &quot; et &quot;JS&quot; pour une utilisation plus spécifique.</p><p> Normalement, vous n&#39;aurez pas besoin d&#39;utiliser des espaces réservés à moins de créer pour <span class="notranslate">iOS</span> et <span class="notranslate">Android</span>, vous choisirez donc l&#39; <em>option Ajouter des fichiers</em> pour ajouter l&#39;un des fichiers suivants en fonction de la plate-forme cible pour laquelle ils sont destinés:</p><ul class="colour"><li class="dropspot"><span class="inline">.gml</span>: Il s&#39;agit d&#39;un fichier créé uniquement avec le <span class="notranslate">GameMaker Language</span> et compatible avec toutes les plates-formes.</li><li class="dropspot"><span class="inline">.js</span>: Il s&#39;agit d&#39;un format d&#39;extension JavaScript et n&#39;est compatible qu&#39;avec les modules cibles JS (HTML5).</li><li class="dropspot"><span class="inline">.dll</span>: Il s&#39;agit d&#39;un format d&#39;extension de bibliothèque de liens dynamiques et n&#39;est compatible qu&#39;avec les <span class="notranslate">Windows</span>, UWP et Xbox One (chaque cible aura besoin d&#39;un <span class="inline">*.dll</span> fichier compatible avec ses spécifications).</li><li class="dropspot"><span class="inline">.dylib</span>: Ceci est l&#39;équivalent Mac d&#39;une DLL et n&#39;est compatible qu&#39;avec la cible Mac (pas <span class="notranslate">iOS</span> ).</li><li class="dropspot"><span class="inline">.so</span>: Ceci est l&#39; <span class="notranslate">Linux</span> d&#39;une DLL et n&#39;est compatible qu&#39;avec la <span class="notranslate">Ubuntu</span> ( <span class="notranslate">Linux</span> ).</li><li class="dropspot"><span class="inline">.prx</span>: Il s&#39;agit d&#39;un format de fichier permettant d&#39;ajouter une fonctionnalité cible PS4 (chaque cible aura besoin d&#39;un <span class="inline">*.prx</span> fichier compatible avec ses spécifications).</li></ul><p> Vous remarquerez qu&#39;il n&#39;y a pas de type de fichier pour <strong><span class="notranslate">Android</span></strong> ni <strong><span class="notranslate">iOS</span></strong>, car leur configuration est légèrement différente. Plus bas, vous pouvez trouver des explications sur la façon de les configurer, mais examinons d&#39;abord la création d&#39;une <span class="notranslate">GML</span> générale pour l&#39;une des plates-formes cibles, car le processus est le même pour toutes.</p><p> Pour commencer, vous devez créer le fichier qui va être utilisé. Pour une <span class="notranslate">GML</span>, ce serait un fichier texte (enregistré avec le <span class="inline">.gml</span> extension) et serait formaté comme ceci:</p><p class="code">#define c_alice_blue<br/> return make_color_rgb(240,248,255);<br/>
    <br/>
    <br/> #define instance_create_colour<br/> var i = instance_create_layer(argument0, argument1, argument2);<br/> with (i)<br/>     {<br/>     image_blend = argument3;<br/>     }<br/> return i;</p><p> Comme vous pouvez le voir, nous commençons chaque section par un <span class="inline">#define</span> call, qui dans l&#39;exemple ci-dessus est utilisé pour définir deux fonctions. Vous n&#39;avez pas besoin de fournir des champs d&#39;argument pour les fonctions car cela sera ajouté plus tard, utilisez simplement le définir puis le nom de la fonction et continuez et ajoutez le <span class="notranslate">GML</span> correspondant. Si vous écriviez une extension DLL ou JS, le processus serait similaire mais dans la langue correcte pour le format de fichier d&#39;extension.</p><p> Une fois que vous avez fait cela, vous devez ajouter le fichier à l&#39;extension (expliqué ci-dessus) qui enchaînera une nouvelle fenêtre aux propriétés des extensions pour les propriétés du fichier:</p><p class="dropspot"><img alt="File Property Window" class="center" height="553" src="../../assets/Images/Asset_Editors/Editor_Extensions_FileProperties.png" width="1050" /></p><p> Ici, vous sélectionnerez la plate-forme cible pour l&#39;extension (pour GM, vous les sélectionneriez toutes), vous renommez le fichier d&#39;extension et définissez quelques autres détails, que nous aborderons dans un instant. L&#39;éditeur devrait être automatiquement rempli avec les fonctions incluses dans notre <span class="notranslate">GML</span>, mais si ce n&#39;est pas le cas, vous pouvez les ajouter en cliquant sur le bouton du menu des fonctions<img alt="Estension Options Icon" class="icon" src="../../assets/Images/Icons/Icon_ExtensionMenu.png" /> et sélectionnez ce dont vous avez besoin:</p><p class="dropspot"><img alt="Add functions/Constants To An Extension" class="center" src="../../assets/Images/Asset_Editors/Editor_Extensions_AddFunctions.png" /></p><p> Sélectionner <em>Ajouter une fonction</em> vous permettra ensuite d&#39;ajouter une fonction à l&#39;extension qui peut ensuite être appelée dans <span class="notranslate">GameMaker Studio 2</span> comme vous le feriez pour n&#39;importe quelle fonction intégrée. <span>Une fois la fonction ajoutée, la fenêtre suivante s&#39;ouvrira pour vous permettre de définir les propriétés de la fonction dans (ou vous pouvez double-cliquer sur la fonction pour l&#39;ouvrir):</span></p><p class="dropspot"><img alt="Function Editor" class="center" src="../../assets/Images/Asset_Editors/Editor_Extensions_FunctionEditor.png" /></p><p> Dans l&#39;image ci-dessus, nous avons rempli l&#39;éditeur de fonction avec les détails de la fonction <span class="inline">instance_create_colour()</span> que nous avons défini dans notre <span class="notranslate">GML</span> (l&#39;éditeur de fonctions ne sert pas uniquement à définir des <span class="notranslate">GML</span> et sera le même pour tout autre type d&#39;extension). Vous pouvez voir que nous avons donné à la fonction un nom, qui est ce que vous appelleriez lors de l&#39;utilisation de la fonction dans votre projet, et ce nom ne doit pas nécessairement correspondre à celui utilisé dans l&#39;extension - vous pouvez le définir sur tout ce que vous voulez et puis utilisez l&#39; <em>option Nom externe</em> pour le lier au nom réel défini dans l&#39;extension. En dessous, vous avez une section pour définir le <em>texte d&#39;aide</em>, qui est le texte qui sera utilisé dans la fenêtre contextuelle complète du code et le texte d&#39;aide en bas de l&#39;éditeur de code.</p><p> Ensuite, vous pouvez définir le <em>type de retour</em>, qui peut être un <strong>double</strong> <a class="glossterm" data-glossterm="point flottant" href="#">(valeur à virgule flottante en</a> nombre réel) ou une chaîne - s&#39;il n&#39;y a rien retourné par la fonction externe, cela n&#39;a pas d&#39;importance - et en dessous vous définissez les arguments que la fonction va prendre.</p><p> Les arguments peuvent être des <strong>doubles</strong> ou des <strong>chaînes</strong>, et vous pouvez les ajouter en cliquant sur le bouton Ajouter<img alt="Add Argument Icon" class="icon" height="18" src="../../assets/Images/Icons/Icon_AddArgument.png" width="18" /> et supprimez-les en cliquant sur le bouton Supprimer<img alt="Remove Argument Icon" class="icon" src="../../assets/Images/Icons/Icon_RemoveArgument.png" />. Si votre fonction peut accepter des arguments variables, vous devez également vous assurer de cocher la <em>case Arguments de longueur variable</em> en bas.</p><p class="note"> <strong>REMARQUE</strong>: si vous créez un <span class="notranslate">Windows</span> <span class="inline">dll </span> fichier et il a plus de quatre arguments, <strong>tous les arguments doivent être du même type</strong>.</p><p> Une fois que vous avez fait tout cela, la fonction est prête à être utilisée dans un projet et elle apparaîtra en complétion automatique et sera également codée par couleur. Les fonctions définies peuvent également être définies comme des <strong>fonctions d&#39;initialisation</strong> ou des <strong>fonctions finales</strong>, ce qui signifie qu&#39;elles seront appelées automatiquement au démarrage du jeu (Init) et à la fin du jeu (Final).</p><p class="note"> <strong>IMPORTANT!</strong> Toutes les plates-formes prennent en charge l&#39;appel de fonction Init, <strong>mais toutes les plates-formes n&#39;exécuteront pas l&#39;appel de fonction Final.</strong> En effet, certaines plates-formes fermeront simplement l&#39;application sans préavis ni heure pour que cette fonction soit appelée. Les plates-formes concernées sont: <strong><span class="notranslate">iOS</span></strong>, <strong><span class="notranslate">Android</span></strong>, <strong>HTML5</strong>, <strong>PlayStation</strong> et <strong>XboxOne</strong>.</p><p> L&#39;autre option dont vous disposez est de créer une <strong>macro</strong>. Une macro peut être une <a class="glossterm" data-glossterm="constant" href="#">valeur constante</a> ou un seul extrait de code (pour plus d&#39;informations sur les macros, voir ici). Par exemple, nous pourrions supprimer la fonction définie de notre exemple d&#39; <span class="notranslate">GML</span> ci-dessus pour la couleur c_alice_blue et en faire une macro à la place. Pour créer une macro, cliquez simplement sur le bouton Macros dans la fenêtre Propriétés de l&#39;extension:</p><p class="dropspot"><img alt="Macro Editor" class="center" src="../../assets/Images/Asset_Editors/Editor_Extensions_MacroEditor.png" /></p><p> L&#39;éditeur ici est assez explicite - vous donnez le nom de la macro / constante et la valeur, ou une courte ligne de code. Notez que si la macro est une ligne de code, <strong>elle sera évaluée à chaque fois que la macro est appelée</strong>.</p><p> Lorsque vous travaillez avec plusieurs plates-formes cibles, il convient de noter que vous pouvez créer une seule extension avec un seul ensemble de fonctions / macros qui fonctionnera sur <em>toutes les</em> plates-formes. Ceci est réalisé en ajoutant une seule des bibliothèques de liens à votre jeu en tant qu&#39;extension et en plaçant les autres dans la liste des <strong>fichiers proxy à</strong> partir de la fenêtre <strong>Propriétés de l&#39;extension.</strong> Par exemple, disons que vous avez une <span class="notranslate">Windows</span> avec le <span class="inline"> <strong>dll </strong></span> &quot; <span class="inline">Haggis.dll</span> &quot;. Vous reproduiriez simplement ceci <span class="inline"> <strong>dll</strong></span> comme un Mac <span class="inline"> <strong>DyLib</strong></span>, en le nommant &quot; <span class="inline"> <strong>libHaggis.dylib</strong></span> &quot;et assurez-vous que les noms des fonctions internes correspondent à ceux de <span class="notranslate">Windows</span> <span class="inline"> <strong>dll</strong></span>. Ce<strong> <span class="inline">DyLib</span></strong> serait alors ajouté dans les fichiers proxy et configuré pour être exporté lorsque le jeu est exécuté sur la cible Mac, et <span class="notranslate">GameMaker Studio 2</span> l&#39;utilisera automatiquement lorsque les fonctions d&#39;extension seront appelées.</p><p> Pour ajouter un fichier proxy, cliquez simplement sur le bouton<img alt="Add Argument Icon" class="icon" height="18" src="../../assets/Images/Icons/Icon_AddArgument.png" width="18" /> dans la fenêtre Propriétés de l&#39;extension pour l&#39;extension et accédez à l&#39;emplacement du fichier. Une fois qu&#39;il est ajouté, vous devrez peut-être changer la cible de l&#39;extension pour le module approprié, et lors de la prochaine exécution de votre jeu, il sera inclus en tant que proxy pour cette plate-forme. Vous pouvez également supprimer les fichiers proxy en cliquant sur le bouton<img alt="Remove Argument Icon"
      class="icon" src="../../assets/Images/Icons/Icon_RemoveArgument.png" />, qui supprimera le dernier de la liste à chaque pression.</p><p> Une fois que vous avez ajouté vos fichiers proxy, ils seront stockés dans les fichiers de projet de votre jeu, dans le dossier Extensions (vous pouvez les retrouver facilement en cliquant avec le bouton droit de la souris)<img alt="RMB Icon" class="icon" src="../../assets/Images/Icons/Icon_RMB.png" /> sur l&#39;extension et en sélectionnant <em>Ouvrir dans l&#39;Explorateur</em> ), donc si vous devez les modifier, vous devez éditer les fichiers copiés qui sont fournis avec le jeu et non les originaux, car <span class="notranslate">GameMaker Studio 2</span> utilisera ceux du projet pour la compilation.</p><p> Il est très important que vos fichiers proxy suivent les conventions de dénomination répertoriées ci-dessous, car <span class="notranslate">GameMaker Studio 2</span> analysera ces noms et attribuera le module cible au fichier en fonction de son extension et de son nom et liera automatiquement les fichiers pour vous. Si vous ne suivez pas ces conventions, votre jeu peut ne pas fonctionner lors de l&#39; <span class="notranslate">runtime</span>, car <span class="notranslate">GameMaker Studio 2</span> ne pourra pas déterminer quel fichier utiliser ou il ne chargera pas le fichier correctement.</p><p> Les conventions de dénomination de chaque plate-forme cible sont indiquées ci-dessous:</p><p class="dropspot"></p><table><tbody><tr><th style=""> Plate-forme</th><th style=""> Noms</th></tr><tr><td style=""> <span class="notranslate">Runtime</span> <span class="notranslate">Windows</span> 32 bits</td><td style=""><span class="inline">&lt;<em>Name</em>&gt;.dll, lib&lt;<em>Name</em>&gt;.dll</span></td></tr><tr><td style=""> <span class="notranslate">Runtime</span> <span class="notranslate">Windows</span> 64 bits</td><td style=""><span class="inline">&lt;N<em>ame</em>&gt;_x64.dll, lib&lt;<em>Name</em>&gt;_x64.dll</span></td></tr><tr><td style=""> <span class="notranslate">Ubuntu</span> ( <span class="notranslate">Linux</span> )</td><td style=""><span class="inline">&lt;<em>Name</em>&gt;.so, lib&lt;<em>Name</em>&gt;.so, &lt;<em>Name</em>&gt;_linux.so, lib&lt;<em>Name</em>&gt;_linux.so</span></td></tr><tr><td style=""> <span class="notranslate">macOS</span></td><td style=""><span class="inline">&lt;<em>Name</em>&gt;.dylib, lib&lt;Name&gt;.dylib</span></td></tr><tr><td style=""> HTML5</td><td style=""><span class="inline">&lt;<em>Name</em>&gt;.js</span></td></tr><tr><td style=""> PS4</td><td style=""><span class="inline">&lt;<em>Name</em>&gt;.prx, lib&lt; <em>Name</em>&gt;.prx, &lt; <em>Name</em>&gt;_ps4.prx, lib&lt; <em>Name</em>&gt;_ps4.prx</span></td></tr><tr><td style=""> <span class="notranslate">XBox One</span></td><td style=""><span class="inline">&lt;<em>Name</em>&gt;_xboxone.dll</span></td></tr></tbody></table><p class="dropspot"></p><p> En utilisant les conventions ci-dessus, vous échangeriez le <span class="inline">&lt;<em>Name</em>&gt;</span> partie pour le nom du fichier de base pour lequel vous ajoutez les fichiers proxy. </p><p></p><p></p><p></p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Retour: <a href="../Extensions.htm">L&#39;éditeur d&#39;extensions</a></div><div style="float:right"> Suivant: <a href="Android_Extensions.htm">Extensions <span class="notranslate">Android</span></a></div></div></div><h5> <span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Tous droits réservés</span></h5>
  </div>
  <!-- KEYWORDS
Creating Extensions
-->
  <!-- TAGS
extensions_create
-->
</body>
</html>