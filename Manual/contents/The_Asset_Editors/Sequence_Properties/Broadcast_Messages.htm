<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Diffuser des messages</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page détaillant la dope sheet" />
  <meta name="rh-index-keywords" content="Séquences - Messages de diffusion" />
  <meta name="search-keywords" content="diffuser,messages,diffuser des messages" />
</head>
<body><!--<div class="body-scroll" style="top: 150px;">--><h1> Diffuser des messages</h1><p> Les <a href="../Sequences.htm">séquences</a> et les <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprites.htm">sprites</a> peuvent générer ce que l&#39;on appelle <strong>des messages de diffusion</strong> à tout moment sur leur longueur. Ces messages sont de simples chaînes qui sont ajoutées à des images spécifiques le long de la chronologie de l&#39;animation, et lorsque ce point dans la chronologie est atteint, la chaîne sera diffusée à toutes les instances qui l&#39;écoutent. Toute instance qui a un <a href="../Object_Properties/Other_Events.htm">événement de message de diffusion</a> (trouvé dans la <strong>catégorie d&#39;événements &quot;Autre</strong> &quot;) recevra la chaîne de message lorsqu&#39;elle est atteinte dans la chronologie, à quel point c&#39;est à vous d&#39;avoir un code qui l&#39;analysera et réagira en conséquence. Notez également que les séquences peuvent également écouter les messages diffusés, mais cela nécessite que vous configuriez d&#39;abord la méthode d&#39;écoute à l&#39;aide du code (voir la <span class="notranslate">GML</span> sur les <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sequences/Sequence_Events_Moments_Broadcast.htm">événements et les moments de séquence</a> pour plus d&#39;informations).</p><p class="note"> <strong>REMARQUE: la</strong> définition de l&#39;image_index d&#39;une instance directement sur une trame <em>ne</em> déclenchera aucun message de diffusion qui peut être présent sur cette trame de l&#39;image-objet de l&#39;objet.</p><p> Pour ajouter un message de diffusion à la séquence ou à la chronologie du sprite, cliquez simplement sur le bouton<img alt="Broadcast Message Button Icon" class="icon" src="../../assets/Images/Icons/Icon_Broadcast.png" /> bouton. Cela ouvrira une boîte de dialogue dans laquelle vous pourrez ajouter le message à diffuser:</p><p class="dropspot"><img alt="Add A broadcast message to a sequence" class="center" src="../../assets/Images/Asset_Editors/Editor_Sequences_Broadcast.gif" style="cursor: nesw-resize;" /></p><p> Une fois ajouté, le message sera affiché dans la <span class="notranslate">Dope Sheet</span> (ou dans la vue du cadre de sprite). Pour le modifier, vous devez cliquer sur le bouton droit de la souris<img alt="RMB Icon" class="icon" height="24" src="../../assets/Images/Icons/Icon_RMB.png" width="21" /> sur l&#39;icône de message pour ouvrir une liste de tous les messages qui chevauchent le cadre (il ne peut y avoir qu&#39;un seul message sur un cadre, mais placer plusieurs messages sur des cadres consécutifs les fera se chevaucher visuellement, ce qui rendra plus difficile la sélection de celui que vous voulez et vous pouvez également avoir un message et un <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sequences/Sequence_Events_Moments_Broadcast.htm">moment</a> sur le même cadre), puis en sélectionner un dans cette liste ouvrira la boîte de dialogue de message où vous pourrez le modifier ou le supprimer.</p><p> Lorsqu&#39;un événement de message de diffusion est déclenché, une <a href="../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm">carte DS</a> spéciale sera créée et stockée dans la variable intégrée <span class="inline">event_data</span>. Cet ID de variable est une <em>variable de portée globale</em> intégrée, mais ne contiendra que des données de carte DS dans l&#39;événement qui l&#39;a déclenché - dans ce cas l&#39;événement de message de diffusion - et renverra -1 à tous les autres moments. Les clés que aura l&#39;événement sont les suivantes:</p><ul class="colour"><li> &quot;<span class="inline">event_type</span> &quot;: Pour un message diffusé, ce sera la chaîne&quot;<span class="inline">sequence event</span> &quot;pour un message envoyé depuis une séquence et&quot;<span class="inline">sprite event</span> &quot;pour un message envoyé par un sprite.</li><li> &quot;<span class="inline">message</span> &quot;: Cette clé contient la chaîne de message qui a été reçue.</li><li> &quot;<span class="inline">element_id</span> &quot;: Cette clé renvoie l&#39;ID de l&#39;élément (séquence / sprite / instance) sur un calque dans l&#39;éditeur de salle. Vous pouvez ensuite utiliser cette valeur d&#39;ID pour savoir quel type d&#39;élément a généré le message à l&#39;aide de la fonction <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Rooms/General_Layer_Functions/layer_get_element_type.htm"><span class="inline">layer_get_element_type()</span></a> et d&#39;utiliser les autres fonctions pertinentes pour le cibler, ou effectuer une action comme jouer un son, selon les besoins.</li></ul><p> Notez que l&#39;événement de message de diffusion d&#39;une instance recevra plusieurs chaînes pour chaque fois qu&#39;un message de diffusion est envoyé. Vous n&#39;avez pas besoin d&#39;agir sur chacun d&#39;eux et vous pouvez avoir différentes instances à l&#39;écoute de différentes chaînes de diffusion. Cependant, vous pouvez avoir une instance qui écoute les messages qui peuvent être reçus en même temps. Lorsque cela se produit, l&#39;événement sera déclenché plusieurs fois - <em>une fois pour chaque chaîne de message</em>.</p><p> Voici un bref exemple de la façon dont cet événement peut être vérifié: </p><p class="code">if event_data[? &quot;event_type&quot;] == &quot;sequence event&quot;<br/> {
    <br/> switch (event_data[? &quot;message&quot;])<br/>     {<br/>     case &quot;hit&quot;:<br/>         audio_play_sound(snd_hit, 0, false);<br/>         break;<br/>     case &quot;destroy&quot;:<br/>         sequence_destroy(event_data[? &quot;element_id&quot;]);<br/>            break;<br/>     }<br/> }
  </p><p></p><p></p><p></p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Retour: <a href="../Sequences.htm">Séquences</a></div><div style="float:right"> Suivant: <a href="The_Sequence_Canvas.htm">Le canevas de séquence</a></div></div></div><h5> <span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Tous droits réservés</span></h5>
  </div>
  <!-- KEYWORDS
Sequences - Broadcast Messages
Broadcast Messages
-->
  <!-- TAGS
sequences_broadcast_messages
-->
</body>
</html>