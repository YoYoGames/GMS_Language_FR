<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Le système de fichiers</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page qui explique le fonctionnement du système de fichiers GMS pour les jeux compilés" />
  <meta name="rh-index-keywords" content="Le système de fichiers" />
  <meta name="search-keywords" content="Système de fichiers,bac à sable,bac à sable,directeur de travail,stockage local" />
</head>
<body><!--<div class="body-scroll" style="top: 150px;">--><h1> Le système de fichiers</h1><p> Lorsque vous utilisez les <a href="../GameMaker_Language/GML_Reference/File_Handling/File_Handling.htm">fonctions du système de fichiers</a> ou les <a href="../Settings/Included_Files.htm">fichiers inclus</a> avec <span class="notranslate">GameMaker Studio 2</span> il est extrêmement important de savoir exactement comment le système de fichiers fonctionne et ce qui se passe dans les coulisses. À cette fin, cette section est conçue pour expliquer et clarifier exactement <em>comment les</em> choses sont stockées, <em>où</em> elles sont stockées et quelles sont les limites ou les solutions de contournement possibles de ce système.</p><p> La première et la plus importante chose à noter à propos des fonctions de fichiers est qu&#39;elles sont limitées - en général et par défaut - au <strong>bac</strong> à sable. Cela signifie que <span class="notranslate">GameMaker Studio 2</span> <strong>ne peut pas enregistrer ou charger des fichiers de n&#39;importe où qui ne fait pas partie du bundle de jeu ou du stockage local de l&#39;appareil</strong> sans <em>entrée explicite</em> de l&#39;utilisateur, et même dans ce cas, cette entrée est limitée uniquement à <span class="notranslate">Windows</span>, <span class="notranslate">macOS</span> et Plates-formes cibles <span class="notranslate">Ubuntu</span> ( <span class="notranslate">Linux</span></p><p class="note"> <strong>IMPORTANT!</strong> Il est toutefois possible de désactiver le sandboxing sur les cibles Desktop ( <span class="notranslate">Windows</span>, <span class="notranslate">macOS</span> et <span class="notranslate">Ubuntu</span> ( <span class="notranslate">Linux</span> )) en cochant l&#39; <strong>option Désactiver le sandbox du système de fichiers</strong> dans les <a href="../Settings/Game_Options.htm">Options de jeu</a> de la plate-forme cible. Vous le faites à vos risques et périls, et bien que cela ouvrira l&#39;enregistrement et le chargement de fichiers et vous permettra d&#39;accéder aux fichiers n&#39;importe où sur le système donné, cela peut toujours être limité par les autorisations du système d&#39;exploitation, et vous ne pourrez pas écrire sur le <a href="../GameMaker_Language/GML_Reference/File_Handling/File_Directories/program_directory.htm"><span style="font-size:1px;"><span class="inline" style="font-size: 14px">program_directory</span></span></a> dossier.</p><p> Pour comprendre le bac à sable, vous devez tout d&#39;abord comprendre qu&#39;il existe deux zones distinctes pour les fichiers:</p><ul class="colour"><li> <strong>L&#39;ensemble de fichiers</strong> - c&#39;est là que tous les fichiers qui sont fournis avec le jeu exécutable sont stockés, y compris les fichiers que vous avez ajoutés à la liste d&#39;actifs <strong>Fichiers inclus à</strong> <span class="notranslate">GameMaker Studio 2</span> (qui sont les fichiers externes avec lesquels vous voulez empaqueter le jeu).</li><li> <strong>La zone de sauvegarde</strong> - c&#39;est une zone de stockage de l&#39;appareil sur laquelle le jeu peut écrire en toute sécurité et le jeu est garanti qu&#39;il s&#39;agit d&#39;une zone inscriptible.</li></ul><p> Le diagramme suivant peut vous aider à mieux visualiser cela:</p><p><img alt="File System Save Areas" class="center" src="../assets/Images/Scripting_Reference/Additional_Information/Files_SaveAreas.png" /></p><p class="note"> <strong>REMARQUE</strong>: vous ne pouvez jamais écrire dans le répertoire File Bundle (programme).</p><p> Lorsque votre jeu est en bac à sable, les deux zones cibles - le répertoire du bundle et la zone de stockage local - sont disponibles sur chaque plate-forme cible, mais sur chacune d&#39;elles, elles fonctionneront légèrement différemment. Cependant, <span class="notranslate">GameMaker Studio 2</span> a résumé l&#39;essence principale de ce qui peut et ne peut pas être fait, ce qui facilite le reciblage des jeux vers plusieurs environnements.</p><p> Pour commencer, vous devez comprendre ce que cela signifie lorsque nous parlons de <a href="../GameMaker_Language/GML_Reference/File_Handling/File_Directories/working_directory.htm"><span class="inline">working_directory</span></a>. Ceci est un synonyme des deux emplacements de sauvegarde possibles (comme illustré par le diagramme ci-dessus) et lorsque vous utilisez ce répertoire, il fera l&#39;une des deux choses selon que vous lisez ou écrivez, et si le fichier que vous lisez a été changé ou non:</p><ul class="colour"><li> <strong>Opérations de lecture</strong> - working_directory vérifiera d&#39;abord la zone de sauvegarde pour voir si le fichier auquel on accède est là, et s&#39;il l&#39;utilise. Cependant, si le fichier n&#39;existe pas dans la zone de sauvegarde, il vérifie alors la zone de regroupement de fichiers et l&#39;utilise (si le fichier recherché est un fichier inclus avec votre jeu).</li><li> <strong>Opérations d&#39;écriture</strong> - Cela ne peut se produire que dans la zone de sauvegarde.</li></ul><p class="note"> <strong>REMARQUE</strong>: en général, <span class="notranslate">GameMaker Studio 2</span> gérera tout cela pour vous et vous aurez <strong>rarement</strong> besoin d&#39;utiliser la <span class="inline" style="font-size: 14px">variable</span> intégrée working_directory.</p><p> En utilisant ces deux règles simples, nous pouvons maintenant voir comment fonctionnent les fonctions suivantes (ce sont des exemples pour vous aider à visualiser le processus pour les différentes fonctions disponibles):</p><ul class="colour"><li> <a href="../GameMaker_Language/GML_Reference/File_Handling/File_Directories/directory_create.htm"><span class="inline">directory_create()</span></a> (et les autres fonctions de répertoire) ne fonctionneront que dans la zone de <strong>sauvegarde.</strong></li><li> les <a href="../GameMaker_Language/GML_Reference/File_Handling/File_System/File_System.htm">fonctions du système de fichiers</a> renvoie des informations sur les fichiers à la <em>fois</em> le <strong>faisceau</strong> et la zone de <strong>sauvegarde,</strong> mais ils <em>n&#39;écrire</em> à la zone de <strong>sauvegarde.</strong></li><li> les fonctions d&#39;écriture de texte, binaire ou <span class="inline">INI</span> Les fichiers créeront un nouveau fichier dans la zone de sauvegarde s&#39;il n&#39;en existe pas déjà un, en copiant toutes les informations des fichiers originaux inclus avec le kit de jeu s&#39;ils existent. Notez que les fichiers d&#39;origine resteront toujours dans la partie en lecture seule du répertoire de sauvegarde, mais ils ne seront pas référencés tant qu&#39;une version existe dans la section lecture / écriture de la zone de sauvegarde.</li></ul><p> Sur les <strong><span class="notranslate">Windows</span></strong>, <strong><span class="notranslate">macOS</span></strong> et <strong><span class="notranslate">Ubuntu</span></strong> ( <span class="notranslate">Linux</span> ), il existe deux façons d&#39;enregistrer et de charger des fichiers depuis l&#39;extérieur du bac à sable, soit en utilisant les fonctions <a href="../GameMaker_Language/GML_Reference/File_Handling/File_System/get_open_filename.htm"><span class="inline">get_open_filename()</span></a> et <a href="../GameMaker_Language/GML_Reference/File_Handling/File_System/get_save_filename.htm"><span class="inline">get_save_filename()</span></a> (ces deux fonctions nécessiteront que l&#39;utilisateur sélectionne une zone de chargement et d&#39;enregistrement et la chaîne de retour peut ensuite être utilisée dans le reste des fonctions de fichier pour contourner le bac à sable - voir les descriptions des fonctions dans la section langue du manuel pour plus des détails). L&#39;autre moyen consiste à désactiver complètement le bac à sable à partir des <a href="../Settings/Game_Options.htm">options de jeu</a> pour la plate-forme cible (disponible uniquement pour les cibles Desktop, comme indiqué plus haut sur cette page).</p><p> Sur HTML5, il est également possible de charger des fichiers depuis l&#39;extérieur du bac à sable depuis un serveur, mais cela ne doit être fait qu&#39;en utilisant la fonction <a href="../GameMaker_Language/GML_Reference/Buffers/buffer_load_async.htm"><span class="inline">buffer_load_async()</span></a> car le chargement synchrone est obsolète sur la plupart des navigateurs et sera finalement obsolète. Cela signifie que les fichiers chargés de cette manière doivent être enregistrés en tant que fichiers binaires - par exemple, vous pouvez enregistrer un fichier <span class="inline">*.ini</span> comme une chaîne (voir <a href="../GameMaker_Language/GML_Reference/File_Handling/Ini_Files/Ini_Files.htm"><span class="inline">ini_close()</span></a> pour plus de détails), puis écrivez-le dans un tampon qui peut ensuite être enregistré et chargé à l&#39;aide des fonctions asynchrones. Notez que si vous chargez des images à l&#39;aide de <a href="../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_add.htm"><span class="inline">sprite_add()</span></a> alors ceux-ci sont déjà traités de manière asynchrone.</p><p> Vous devez également savoir que chaque plate-forme cible a sa propre zone de sauvegarde dans laquelle les fichiers et les répertoires peuvent être écrits et lus. Vous trouverez ci-dessous une liste de ces zones pour chaque cible une fois en bac à sable:</p><ul class="colour"><li> <strong><span class="notranslate">Windows</span> et <span class="notranslate">Windows</span></strong> <strong>UWP</strong>: <span class="notranslate">Windows</span> a tous les fichiers dans le <span class="inline">%localappdata%\&lt;Game Name&gt;</span> répertoire (sous <span class="notranslate">Windows 7</span> il s&#39;agit du <span class="inline">/Users/&lt;User Name&gt;/AppData/Local/&lt;Game Name&gt;</span> annuaire).</li><li> <strong>HTML5</strong>: Tout se fait via le stockage local.</li><li> <strong><span class="notranslate">macOS</span></strong>: le stockage dépendra du fait que l&#39;application soit en bac à sable ou non (selon les règles d&#39;Apple, le chemin étant généralement <span class="inline">~/Library/Application Support/&lt;Game Name&gt;</span> ).</li><li> <strong><span class="notranslate">Ubuntu</span> ( <span class="notranslate">Linux</span> )</strong>: les fichiers sont stockés dans le <span class="inline">Home/.config/gamename</span> où &quot;Home&quot; est le répertoire de base des utilisateurs - <span class="inline">/home/&lt;username&gt;</span></li><li> <strong><span class="notranslate">iOS</span></strong> / <strong><span class="notranslate">tvOS</span></strong>: le stockage est l&#39;emplacement standard (tel qu&#39;il est affiché via iTunes).</li><li> <strong><span class="notranslate">Android</span></strong>: les fichiers sont à l&#39;emplacement standard (qui est invisible sauf si l&#39;appareil est enraciné) <span class="inline">/data/&lt;package name&gt;</span>.</li></ul><p> Il est à noter que le module cible HTML5 a une limite de stockage local (qui peut être comprise entre 1 Mo et 5 Mo selon le navigateur), ce qui signifie que vous ne serez pas autorisé à enregistrer de grands sprites, des captures d&#39;écran, etc. </p><p></p><p></p><p></p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Retour: <a href="Additional_Information.htm">Informations complémentaires</a></div><div style="float:right"> Suivant: <a href="Bitwise_Operators.htm">Opérateurs binaires et binaires</a></div></div></div><h5> <span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Tous droits réservés</span></h5>
  </div>
  <!-- KEYWORDS
The File System
Sandbox
Sandboxing
Working Directory
Local Storage
-->
  <!-- TAGS
file_system
-->
</body>
</html>