<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Séquences</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page décrivant les différentes fonctions et variables associées aux séquences" />
  <meta name="rh-index-keywords" content="" />
  <meta name="search-keywords" content="Séquences" />
</head>
<body><!--<div class="body-scroll" style="top: 150px;">--><h1> Séquences</h1><p> Les séquences sont généralement créées dans l&#39;EDI à l&#39;aide de l&#39; <a href="../../../../The_Asset_Editors/Sequences.htm">éditeur de séquence</a>, mais elles peuvent également être créées et modifiées à l&#39;aide de code. Cependant, avant de regarder les fonctions disponibles, il est important de comprendre la façon dont les séquences sont définies dans <span class="notranslate">GameMaker</span> et les différents termes qui seront utilisés.</p><p> Pour commencer, au niveau supérieur, vous avez un <b>élément de séquence</b>. C&#39;est ce que vous placez sur un calque dans une pièce, soit via l&#39;éditeur de pièce, soit dans le code en utilisant les <a href="../Rooms/Sequence_Layers/Sequence_Layers.htm">fonctions de calque</a> appropriées. L&#39;élément de couche n&#39;a pas de propriétés réelles autres qu&#39;une valeur d&#39;ID d&#39;élément, mais cet ID est nécessaire pour utiliser les fonctions de couche mentionnées ci-dessus pour changer la lecture de séquence ou pour accéder aux données de séquence.</p><p> Ensuite, vous avez des <b>objets de séquence</b> et des <b>instances de séquence,</b> tout comme vous avez des objets et des instances généraux. Un <i>objet</i> séquence est la ressource de base telle que vous l&#39;avez créé dans le <b>navigateur de ressources</b> ou à l&#39;aide de la fonction <a href="sequence_create.htm"><tt>sequence_create()</tt></a>, et l&#39; <i>instance de</i> séquence est la &quot;copie&quot; de cet objet séquence qui a été placé dans une pièce en tant qu&#39;élément sur un calque. Considérez les objets de séquence comme des plans et les instances de séquence comme la création à partir de ces plans. Les objets et les instances de séquence sont des <a href="../../../GML_Overview/Structs.htm">structures</a> et - contrairement aux objets ordinaires - une structure d&#39;objet de séquence peut être modifiée à l&#39; <span class="notranslate">runtime</span>, ce qui affectera toutes les autres instances de cette séquence lorsque vous les créez en tant qu&#39;éléments (et toute modification effectuée sur un objet de séquence ne sera <b>pas</b> réinitialisée. en redémarrant le jeu ou la salle à l&#39;aide du <tt>room_restart()</tt> ou <tt>game_restart()</tt> les fonctions). La structure d&#39;instance de séquence contient quelques paramètres pour contrôler la lecture et les choses (cela est expliqué plus en détail ci-dessous) ainsi que la structure de <b>données de séquence.</b></p><p> Enfin, comme mentionné ci-dessus, vous avez les <b>données de séquence</b>, qui sont une autre structure. Cette structure contient <i>toutes</i> les données sur la séquence. Les pistes qu&#39;il contient, les propriétés de ces pistes, la vitesse de lecture et bien plus encore. Les détails exacts du contenu de ces structures sont décrits ci-dessous, mais se composent essentiellement de structures de <b>suivi d&#39;actifs</b> <b>et de structures de suivi de paramètres</b> qui utilisent des <b>données d&#39; <span class="notranslate">keyframe</span></b> pour effectuer réellement des actions pendant la lecture de la séquence.</p><p> Les éléments de séquence sont traités à l&#39;aide des <a href="../Rooms/Sequence_Layers/Sequence_Layers.htm">fonctions de couche de</a> pièce, mais pour les objets de séquence, les instances et les données, nous avons les fonctions suivantes: </p><p></p><ul class="colour"><li><a href="sequence_exists.htm">sequence_exists</a></li><li><a href="sequence_create.htm">sequence_create</a></li><li><a href="sequence_destroy.htm">sequence_destroy</a></li><li><a href="sequence_get.htm">sequence_get</a></li><li><a href="sequence_track_new.htm">sequence_track_new</a></li><li><a href="sequence_keyframe_new.htm">séquence_ <span class="notranslate">keyframe</span> _new</a></li><li> <a href="sequence_keyframedata_new.htm">séquence_ <span class="notranslate">keyframe</span> data_new</a></li><li><a href="sequence_get_objects.htm">sequence_get_objects</a></li><li><a href="sequence_instance_override_object.htm">sequence_instance_override_object</a></li></ul><p></p><p> Il existe également une <strong>variable intégrée</strong> associée aux instances qui peut être utilisée pour déterminer si l&#39;instance a été utilisée dans une séquence ou non:</p><p></p><ul class="colour"><li><a href="in_sequence.htm">in_sequence</a></li></ul><p class="note"> <strong>IMPORTANT!</strong> Si votre séquence contient des instances, ces instances ne doivent pas changer leur<span class="inline"><span style="font-size:14px;">image_xscale</span> /<span class="inline"><span style="font-size:14px;">image_yscale</span> / <span
      class="inline"><span style="font-size:14px;">image_angle</span></span> /<span class="inline"><span style="font-size:14px;">x</span> /<span class="inline"><span style="font-size:14px;">y</span> variables car elles seront écrasées lorsque la séquence sera mise à jour à chaque étape après le début de la lecture.</p><p></p><p> Avant d&#39;utiliser ces fonctions pour créer ou modifier des séquences, nous vous recommandons de lire les descriptions détaillées ci-dessous pour les propriétés de la structure. Un aperçu général de la façon de créer une nouvelle séquence serait:</p><ul class="colour"><li> Créez le nouvel objet séquence à l&#39;aide de la fonction <a href="sequence_create.htm"><tt>seqeunce_create()</tt></a> et stocker l&#39;index d&#39;objet de séquence dans une variable. Cet index vous donne accès à la structure de l&#39;objet séquence.</li></ul><p class="code">myseq = sequence_create();</p><ul class="colour"><li> Définissez les valeurs de niveau supérieur de l&#39;objet séquence telles que la longueur, le mode de lecture, la vitesse de lecture, etc. Par exemple:</li></ul><p class="code">myseq.length = 120;<br/> myseq.loopmode = seqplay_pingpong</p><ul class="colour"><li> Avant de pouvoir ajouter des pistes à l&#39;objet séquence, vous devez les créer, donc vous allez maintenant créer un tableau de <i>pistes d&#39;actifs</i> qui ont été définies avec la fonction <a href="sequence_track_new.htm"><tt>sequence_track_new()</tt></a>. Notez que dans le code, il n&#39;y a vraiment aucune différence entre les pistes d&#39;actifs et les pistes de paramètres - ce sont toutes simplement des pistes et leur comportement dépendra du type de piste que vous créez et si elles sont affectées en tant que sous-pistes à une piste de niveau supérieur ou ne pas. Ainsi, vous créeriez une piste pour un actif, puis affecteriez des sous-pistes pour les différents paramètres à celui-ci et ces sous-pistes agiraient comme les <i>pistes de paramètres</i> pour l&#39;actif. L&#39;exemple ci-dessous crée une seule piste d&#39;actif graphique qui sera ajoutée ultérieurement à la séquence:</li></ul><p class="code">var mytracks = array_create(1);<br/> mytracks[0] = sequence_track_new(seqtracktype_graphic);</p><ul class="colour"><li> Chaque piste d&#39;actif doit avoir des données pour dire à la séquence à quoi elle ressemblera, ou sa position, etc... et cela est ajouté sous la forme d&#39; <i><span class="notranslate">keyframes</span></i>. Au niveau supérieur d&#39;une piste d&#39;actif, vous pouvez définir des <span class="notranslate">keyframes</span> pour diverses choses (répertoriées dans la section sur la structure de piste, ci-dessous), mais notez que comme il s&#39;agit d&#39; <span class="notranslate">keyframes</span> piste d&#39;actif, elles ne seront pas interpolées et changeront simplement le valeur à laquelle ils se réfèrent lorsque la trame donnée est atteinte. Chaque <span class="notranslate">keyframe</span> est une structure qui est ajoutée à un tableau, puis ce tableau est affecté à la piste d&#39;actif. Pour créer la <span class="notranslate">keyframe</span> nous appellerions la fonction <a href="sequence_keyframe_new.htm"><tt>sequence_keyframe_new()</tt></a> et pour remplir l&#39; <span class="notranslate">keyframe</span> avec les données requises, nous utiliserions la fonction <a href="sequence_keyframedata_new.htm"><tt>sequence_keyframedata_new()</tt></a>:</li></ul><p class="code">// Create a new keyframe struct for a graphics asset track and add it to an array (as you can have multiple keys in a frame)<br/> var graphickeys = array_create(1);<br/> graphickeys[0] = sequence_keyframe_new(seqtracktype_graphic);<br/> // Set the graphics
    keyframe top level data for the keyframe position and length, etc...<br/> graphickeys[0].frame = 0;<br/> graphickeys[0].length = 1;<br/> graphickeys[0].stretch = true;<br/> graphickeys[0].disabled = false;<br/> // Create the channel data that will
    go into this keyframe (again an array, as each key can have multiple channels of keyframe data)<br/> var graphickeydata = array_create(1);<br/> graphickeydata[0] = sequence_keyframedata_new(seqtracktype_graphic);<br/> graphickeydata[0].spriteIndex
    = spr_Platform;<br/> graphickeydata[0].channel = 0;<br/> // Add the keyframe data channels to the graphics track keyframe<br/> graphickeys[0].channels = graphickeydata;<br/> // Add the definied keyframes to the track<br/> mytracks[0].name = &quot;TestGraphicTrack&quot;;<br/>    mytracks[0].keyframes = graphickeys;</p><ul class="colour"><li> Nous devons maintenant créer une piste de paramètres que nous attribuerons en tant que sous-piste à la piste graphique que nous venons de créer. Cela sera fait de la même manière que ci-dessus, seulement maintenant nous devons donner à la piste un nom qui montre son but, dans ce cas &quot;position&quot; car nous allons utiliser cette piste pour déplacer la piste de la piste graphique sur le parcours des images d&#39;animation de séquence:</li></ul><p class="code">// Create a new parameter track struct for the position of the graphic<br/> var paramtracks = array_create(1);<br/> paramtracks[0] = sequence_track_new(seqtracktype_real);<br/> paramtracks[0].name = &quot;position&quot;;<br/> paramtracks[0].interpolation
    = true;<br/> // Create the keyframe struct to hold the parameter channel data and set the frame position for the keyframe<br/> var paramkeys = array_create(2);<br/> paramkeys[0] = sequence_keyframe_new(seqtracktype_real);<br/> paramkeys[0].frame =
    0;<br/> paramkeys[1] = sequence_keyframe_new(seqtracktype_real);<br/> paramkeys[1].frame = 120;<br/> // Create the keyframe data structs<br/> var paramkeydata1 = array_create(2);<br/> paramkeydata1[0] = sequence_keyframedata_new(seqtracktype_real);<br/>    paramkeydata1[0].channel = 0; // Channel 0 for a position track is the X position<br/> paramkeydata1[0].value = 0;<br/> paramkeydata1[1] = sequence_keyframedata_new(seqtracktype_real);<br/> paramkeydata1[1].channel = 1; // Channel 1 for a position
    track is the Y position<br/> paramkeydata1[1].value = 0;<br/> var paramkeydata2 = array_create(2);<br/> paramkeydata2[0] = sequence_keyframedata_new(seqtracktype_real);<br/> paramkeydata2[0].channel = 0;<br/> paramkeydata2[0].value = room_width;<br/>    paramkeydata2[1] = sequence_keyframedata_new(seqtracktype_real);<br/> paramkeydata2[1].channel = 1;<br/> paramkeydata2[1].value = room_height;<br/> // Assign the keyframe data structs to the channels for each key<br/> paramkeys[0].channels = paramkeydata1;<br/>    paramkeys[1].channels = paramkeydata2;<br/> // Assign the keys to the parameter track<br/> paramtracks[0].keyframes = paramkeys;</p><ul class="colour"><li> Une fois cela fait, la dernière chose à faire est d&#39;assigner la piste de paramètres en tant que sous-piste à notre piste d&#39;actif graphique principale que nous avons créée au début, puis d&#39;affecter ces pistes à la séquence dont nous pouvons ensuite créer une instance dans la pièce.:</li></ul><p class="code">mytracks[0].tracks = paramtracks;<br/> myseq.tracks = mytracks;<br/> layer_sequence_create(&quot;Assets_1&quot;, 0, 0, myseq);</p><p> Les instructions ci-dessus créent un objet séquence très simple qui dessine un sprite à la position (0, 0) <i>de la séquence</i>, puis le déplace vers le coin inférieur droit et retourne en boucle. Comme mentionné, il existe un certain nombre d&#39;endroits où vous devez accéder à différentes structures pour donner ou obtenir des données sur la séquence, et les sections ci-dessous répertorient toutes les différentes propriétés que ces structures contiennent:</p><ul class="colour"><li><a name="object"></a> <a href="Sequence_Structs/The_Sequence_Object_Struct.htm"><label for="1">La structure de l&#39;objet de séquence</label></a></li><li><a name="instance"></a> <a href="Sequence_Structs/The_Sequence_Instance_Struct.htm"><label for="2">La structure d&#39;instance de séquence</label></a></li><li><a name="track"></a> <a href="Sequence_Structs/The_Track_Struct.htm"><label for="3">La structure de la voie</label></a></li><li><a name="keyframe"></a> <a href="Sequence_Structs/The_Keyframe_Struct.htm"><label for="4">La <span class="notranslate">Keyframe</span></label></a></li><li><a name="keyframe_data"></a> <a href="Sequence_Structs/The_Keyframe_Data_Struct.htm"><label for="5">La <span class="notranslate">Keyframe</span> données d&#39;images clés</label></a></li></ul><p></p><p> Enfin, il est possible d&#39;ajouter du code à des séquences qui peuvent être déclenchées soit comme un <strong>événement à</strong> un <strong>moment,</strong> soit comme un <strong>message diffusé</strong>. Ceci est expliqué en détail sur la page suivante:</p><ul class="colour"><li> <a href="Sequence_Events_Moments_Broadcast.htm">Événements, moments et messages diffusés</a> </li></ul><p></p><p></p><p></p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Retour: <a href="../Asset_Management.htm">Asset Management</a></div><div style="float:right"> Suivant: <a href="../Fonts/Fonts.htm">Polices</a></div></div></div><h5> <span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Tous droits réservés</span></h5>
  </div>
  <!-- KEYWORDS
Sequences
-->
  <!-- TAGS
sequence_functions
-->
</body>
</html>