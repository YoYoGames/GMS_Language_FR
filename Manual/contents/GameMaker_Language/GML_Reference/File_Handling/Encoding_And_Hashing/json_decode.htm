<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>json_decode</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page de référence pour json_decode" />
  <meta name="rh-index-keywords" content="json_decode" />
  <meta name="search-keywords" content="json_decode" />
</head>
<body><!--<div class="body-scroll" style="top: 150px;">--><h1>json_decode</h1><h3> <strong>IMPORTANT!</strong> Cette fonction - tout en étant toujours valide - a été supplantée par la fonction <span class="inline"><a href="json_parse.htm">json_parse()</a></span>, et nous vous recommandons de n&#39;utiliser cette fonction que pour le support hérité.</h3><p> JSON (JavaScript Object Notation) est un format d&#39;échange de données léger qui est facile à lire et à écrire, pour les personnes et les machines. Il est construit sur deux structures de base:</p><ul class="colour"><li> Une collection de paires nom / valeur, appelée <a href="../../Data_Structures/DS_Maps/DS_Maps.htm"><tt>DS Map</tt></a> dans <span class="notranslate">GameMaker Studio 2</span> mais également appelé «dictionnaire» ou «objet».</li><li> Une liste ordonnée de valeurs, appelée <a href="../../Data_Structures/DS_Lists/DS_Lists.htm"><tt>DS List</tt></a> dans <span class="notranslate">GameMaker Studio 2</span> mais cela peut également être appelé «tableau» ou «séquence».</li></ul><p> Avec cette fonction, vous pouvez décoder un morceau de JSON et le convertir en un <tt>DS Map</tt>, prêt à être utilisé dans <span class="notranslate">GameMaker Studio 2</span>. Si le JSON à décoder nécessite une hiérarchie de listes et de cartes dans la carte DS centrale, celles-ci sont également décodées et également créées pour vous, à l&#39;aide des règles suivantes (notez que ces règles s&#39;appliquent uniquement à la structure de niveau supérieur):</p><ul class="colour"><li> <strong><i>JSON est une valeur unique</i></strong> - renvoie une carte DS avec une seule entrée &quot;par défaut&quot; qui est la valeur</li><li> <strong><i>JSON est un tableau d&#39;objets ou de valeurs</i></strong> - renvoie une carte DS avec une seule entrée &quot;par défaut&quot; qui est une liste DS des objets ou des valeurs</li><li> <strong><i>JSON est un objet</i></strong> - renvoie une carte DS contenant les entrées d&#39;objet</li></ul><p class="note"> <b>REMARQUE</b>: lors du décodage de tableaux JSON, il existe une carte avec la clé «par défaut» UNIQUEMENT lorsqu&#39;un tableau est la structure de niveau supérieur, et UNIQUEMENT pour ce tableau de niveau supérieur. Les listes internes se décodent directement dans la carte DS sans être incluses dans une carte DS.</p><p class="note"> <strong>REMARQUE</strong>: si vous avez écrit des <span class="notranslate">GameMaker</span> dans le niveau supérieur, ou en tant que contenu d&#39;une carte DS ou d&#39;une liste DS, ceux-ci seront décodés sous forme de listes DS et <strong>non de</strong> tableaux.</p><p> Normalement, vous saurez sur quelles clés le JSON décode, mais sinon, vous pouvez utiliser le <a href="../../Data_Structures/DS_Maps/ds_map_size.htm"><tt>ds_map_size()</tt></a>, <a href="../../Data_Structures/DS_Maps/ds_map_find_first.htm"><tt>ds_map_find_first()</tt></a> et <a href="../../Data_Structures/DS_Maps/ds_map_find_next.htm"><tt>ds_map_find_next()</tt></a> fonctions pour analyser la carte et obtenir les informations nécessaires.</p><p class="note"> <b>REMARQUE</b>: <span class="notranslate">GameMaker Studio 2</span> crée les cartes et listes DS nécessaires à partir du JSON, et pour le nettoyage, il vous suffit de supprimer la carte ou la liste de <b>niveau supérieur</b> <span class="notranslate">GameMaker Studio 2</span> supprimera automatiquement de la mémoire toutes les cartes et listes en dessous.</p><p class="note"> <b>IMPORTANT</b>: vous ne pouvez pas avoir de numéros 64 bits dans votre JSON, car ils ne fonctionneront pas correctement car ils ne sont pas gérés par le format JSON.</p><p></p><h4> Syntaxe:</h4><p class="code">json_decode(string)</p><table><tbody><tr><th> Argument</th><th> Description</th></tr><tr><td> <span class="notranslate">string</span></td><td> La chaîne de format JSON que vous transmettez à la fonction pour le décodage</td></tr></tbody></table><p></p><h4> Retour:</h4><p class="code">DS map id or -1 if it fails</p><p></p><h4> Exemple:</h4><p class="code">var resultMap = json_decode(requestResult);<br/> var list = ds_map_find_value(resultMap, &quot;default&quot;);<br/> var size = ds_list_size(list);<br/> for (var n = 0; n &lt; ds_list_size(list); n++;)<br/>    {
    <br/>    var map = ds_list_find_value(list, n);<br/>    var curr = ds_map_find_first(map);<br/>    while (is_string(curr))<br/>       {
    <br/>       global.Name[n] = ds_map_find_value(map, &quot;name&quot;);<br/>       curr = ds_map_find_next(map, curr);<br/>       }
    <br/>    }
    <br/> ds_map_destroy(resultMap);
  </p><p> Le code ci-dessus décodera une chaîne JSON et l&#39;analysera pour générer un tableau global. </p><p></p><p></p><p></p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Retour: <a href="Encoding_And_Hashing.htm">Encodage de fichiers</a></div><div style="float:right"> Suivant:<a href="json_stringify.htm">json_stringify</a></div></div></div><h5> <span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2021 Tous droits réservés</span></h5>
  </div>
  <!-- KEYWORDS
json_decode
-->
  <!-- TAGS
json_decode
-->
</body>
</html>