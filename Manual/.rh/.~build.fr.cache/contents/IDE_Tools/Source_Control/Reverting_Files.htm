
  
  Rétablissement des fichiers
  Dans les sections précédentes, vous avez vu comment créer un référentiel et y commettre des choses, mais que se passe-t-il si vous faites une erreur et que vous voulez "revenir en arrière" à un précédent
    précédent ? Faisons une erreur délibérée et voyons comment nous pouvons la gérer...
  Tout d'abord, créez une nouvelle ressource - dans cet exemple, nous allons créer une ressource Script - et initialement, vous ne verrez pas d'icône d'état puisque, en ce qui concerne le contrôle de la source, elle n'existe pas encore. Dans la ressource script, ajoutez une simple ligne
    de code, comme :
  show_debug_message("Hello World") ;
  Si vous fermez maintenant l'éditeur de code, le script sera enregistré et l'icône du fichier modifié  apparaîtra à côté de lui dans le navigateur d'actifs.
    Maintenant, ouvrez la fenêtre Commit et vous verrez qu'il y a quatre changements échelonnés, car de nouvelles ressources sont automatiquement ajoutées :
  Les changements mis en scène seront :
  
    le dossier du projet .yyp 
    un fichier de vue
    le script GML lui-même
    le fichier .yy qui y fait référence
  
  Vous devez saisir un message de validation et cliquer sur le bouton Valider , comme nous l'avons expliqué précédemment. Maintenant, retournons à notre script et changeons la ligne de code en (par exemple) :
  show_debug_message("Hello World, how are you ?") ;
  Lorsque nous fermons l'éditeur de code, l'icône rouge  s'affiche à nouveau à côté du script, mais nous nous sommes rendu compte que nous avons fait une erreur avec notre code et nous voulons
    revenir à une version précédente pour la corriger (évidemment, vous pourriez simplement ouvrir le script et le corriger facilement, puisque l'exemple est si simple, mais dans les grands projets, ce n'est normalement pas une approche faisable). Ce que nous devons faire, c'est revenir sur nos
    modifications.
  Pour annuler une modification, nous devons d'abord rouvrir la fenêtre de validation, donc nous allons dans Source Control > Commit Changes une fois de plus. Notre fichier modifié sera à nouveau mis en scène, prêt à être validé, mais ce n'est pas ce que nous voulons.
    donc nous cliquons sur le bouton Unstage All pour le sortir de la zone de mise en scène.
  Si nous faisons maintenant un clic droit  sur le fichier que nous avons modifié, nous obtiendrons un menu contextuel avec l'option "Revert Path" :
  Lorsque vous sélectionnez cette option, vous rétablissez les fichiers dans l'état dans lequel ils se trouvaient auparavant.
  IMPORTANT ! Lorsque vous faites un retour en arrière, vous obtiendrez un message vous demandant de recharger ou de sauvegarder le projet en cours, car le vérificateur de fichiers a détecté des changements sur le disque :
    . Vous devez cliquer sur Reload et non sur save, car le fait de sauvegarder sauvegardera ce qui est en mémoire plutôt que de recharger les fichiers inversés.
  C'est très bien lorsque vous modifiez quelque chose et que vous voulez revenir en arrière sans avoir déjà effectué un commit, mais qu'en est-il lorsque vous avez effectué un ou plusieurs changements et que vous voulez revenir à un commit précédent ? Eh bien, modifions à nouveau
    notre script pour dire :
  show_debug_message("C'est une mauvaise idée") ;
  Maintenant, nous le commettons comme avant pour le mettre sous contrôle de la source. Donc, c'était une mauvaise idée et nous voulons revenir en arrière, ce qui signifie que pour commencer, nous devons ouvrir la fenêtre Contrôle de la source > Afficher l'historique. Ici, nous verrons une
    liste de tous les commits précédents maintenant dans cette fenêtre, en commençant par le commit initial, le commit pour le script, et ensuite le commit pour le script que nous avons édité comme une "mauvaise idée" :
  Nous avons maintenant deux choix. Nous pouvons inverser une révision entière - ce qui inversera tous les fichiers qui ont été modifiés à ceux du commit choisi -
    ou nous pouvons choisir d'inverser un chemin - ce qui inversera simplement un seul fichier. Commençons par la première option :
  
    Faites un clic droit  sur notre second commit dans le panneau Historique des Commissions ( le commit "Hello World").
    Sélectionnez Revenir à cette révision, puis choisissez ReLoad dans le message d'avertissement.
  
  Vous devriez voir que le script a maintenant une icône d'état rouge , et si nous l'ouvrons, nous aurons ce qui suit :
  Nous pouvons alors effectuer un commit sur le projet et nous serons de nouveau au point de départ. Cependant, nous pouvons aussi annuler cette action
    pour le fichier et récupérer notre "mauvaise idée" en faisant ce qui suit :
  
    Ouvrez la fenêtre Commit Changes.
    Défaites le script contenant le code "Hello World".
    Cliquez à droite  et inverser le chemin.
  
  Maintenant, nous avons à nouveau le fichier erroné dans le projet ! Nous pouvons profiter de cette occasion pour rétablir uniquement le chemin d'accès au fichier au lieu de tout rétablir à une révision précédente. Pour cela, nous devons faire ce qui suit :
  
    Ouvrez la fenêtre Historique des vues.
    Cliquez sur le deuxième commit (le commit "Hello World").
    Cliquez avec le bouton droit de la souris  sur notre script GML dans le volet des fichiers et sélectionnez Revert Path.
  
  Nous devrions avoir à nouveau notre code "Hello World" et nous pouvons alors faire un nouveau commit pour mettre à jour le contrôle de source avec le fichier corrigé.
   
   
   
  
    
      
        Retour : Contrôle de la source
        Suivant : Cloner un référentiel 
      
    
    Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

