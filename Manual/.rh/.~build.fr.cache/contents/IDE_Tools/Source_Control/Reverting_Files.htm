 Rétablissement de fichiers Dans les sections précédentes, vous avez vu comment créer un référentiel et y valider des choses, mais que se passe-t-il si vous faites une erreur et que vous voulez "revenir" à un commit précédent? Faisons une erreur délibérée et voyons comment nous pouvons y remédier alors... Tout d'abord, créez une nouvelle ressource - dans cet exemple, nous allons créer une ressource Script - et au départ, vous ne verrez aucune icône d'état car en ce qui concerne le contrôle de source, il n'existe pas encore. Dans la ressource de script, ajoutez une simple ligne de code, comme:show_debug_message("Hello World"); Si vous fermez maintenant l'éditeur de code, le script sera enregistré et l'icône du fichier modifié apparaîtra à côté de lui dans le navigateur de ressources. Maintenant, ouvrez la fenêtre de validation et vous verrez qu'il y a quatre changements par étapes, car de nouvelles ressources sont automatiquement ajoutées: Les changements par étapes seront: le .yyp dossier de projet un fichier de vue le GML lui-même le .yy fichier le référençant Vous devez taper un message de validation, puis cliquer sur le bouton Valider, comme nous l'avons expliqué précédemment. Maintenant, nous retournons à notre script et changeons la ligne de code en (par exemple):show_debug_message("Hello World, how are you?"); Lorsque nous fermons l'éditeur de code, à nouveau une icône rouge sera affiché à côté du script, mais nous avons réalisé que nous avons fait une erreur avec notre code et que nous voulons revenir à une version précédente pour le corriger (évidemment, vous pouvez simplement ouvrir le script et le corriger facilement, depuis l'exemple est si simple, mais dans les grands projets, ce n'est normalement pas une approche réalisable). Ce que nous devons faire, c'est annuler nos changements. Pour annuler une modification, nous devons d'abord ouvrir à nouveau la fenêtre de validation, nous allons donc à nouveau dans Contrôle de la source > Valider les modifications. Notre fichier modifié sera à nouveau préparé pour être validé, mais ce n'est pas ce que nous voulons, nous cliquons donc sur le bouton Tout désinstaller pour le sortir de la zone de préparation. Si nous faisons maintenant un clic droit sur le fichier que nous avons modifié, nous obtiendrons un menu contextuel avec une option pour inverser le chemin: Lorsque vous sélectionnez cette option, vous rétablissez les fichiers dans leur état antérieur. IMPORTANT! Lorsque vous revenez, vous recevrez un message vous demandant de recharger ou d'enregistrer le projet en cours en raison du vérificateur de fichiers détectant les modifications sur le disque: Vous devez appuyer sur Recharger et ne pas enregistrer, car l'enregistrement sauvegardera la mémoire plutôt que de recharger les fichiers rétablis. C'est très bien lorsque vous modifiez quelque chose et que vous souhaitez revenir en arrière sans avoir déjà effectué une validation, mais qu'en est-il lorsque vous avez commis une ou plusieurs modifications et que vous souhaitez revenir à une validation précédente? Eh bien, éditons à nouveau notre script pour dire:show_debug_message("This is a bad idea"); Maintenant, nous le validons comme avant pour le mettre sous contrôle de code source. Donc, c'était une mauvaise idée et nous voulons revenir en arrière, ce qui signifie que pour commencer, nous devons ouvrir la fenêtre Contrôle de la source> Afficher l'historique. Ici, nous allons voir une liste de tous les commits précédents maintenant dans cette fenêtre, en commençant par le commit initial, le commit pour le script, puis le commit pour le script que nous avons édité comme une "mauvaise idée": Nous avons maintenant deux choix. Nous pouvons annuler une révision entière - ce qui rétablira tous les fichiers qui ont été modifiés par ceux du commit choisi - ou nous pouvons choisir de rétablir un chemin - ce qui rétablira simplement un seul fichier. Faisons la première option pour commencer: Clic-droit notre deuxième commit dans le volet Commit History (le commit "Hello World"). Sélectionnez Revenir à cette révision, puis choisissez Recharger dans le message d'avertissement. Vous devriez voir que le script a maintenant une icône d'état rouge, et si nous l'ouvrons, nous aurons ce qui suit: Nous pouvons alors faire un commit sur le projet et nous reviendrons là où nous en étions une fois de plus. Cependant, nous pouvons également annuler cette action pour le fichier et récupérer notre validation de "mauvaise idée" en procédant comme suit: Ouvrez la fenêtre Valider les modifications. Désactivez le script contenant le code "Hello World". Clic-droit et Revert Path. Maintenant, nous avons de nouveau le fichier erroné dans le projet! Eh bien, nous pouvons profiter de cette occasion pour restaurer uniquement ce chemin de fichier au lieu de tout restaurer à une révision précédente. Pour cela, nous devons faire ce qui suit: Ouvrez la fenêtre Afficher l'historique. Cliquez sur le deuxième commit (le commit "Hello World"). Clic-droit sur notre script GML dans le volet Fichiers et sélectionnez Revert Path. Nous devrions être de retour à avoir notre code "Hello World" et nous pouvons alors faire un nouveau commit pour mettre à jour à nouveau le contrôle source avec le fichier corrigé.  Retour: Contrôle de la source Suivant: Cloner un référentiel © Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

