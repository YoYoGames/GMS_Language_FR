 Diffuser des messages Les séquences et les sprites peuvent générer ce que l'on appelle des messages de diffusion à tout moment sur leur longueur. Ces messages sont de simples chaînes qui sont ajoutées à des images spécifiques le long de la chronologie de l'animation, et lorsque ce point dans la chronologie est atteint, la chaîne sera diffusée à toutes les instances qui l'écoutent. Toute instance qui a un événement de message de diffusion (trouvé dans la catégorie d'événements "Autre ") recevra la chaîne de message lorsqu'elle est atteinte dans la chronologie, à quel point c'est à vous d'avoir un code qui l'analysera et réagira en conséquence. Notez également que les séquences peuvent également écouter les messages diffusés, mais cela nécessite que vous configuriez d'abord la méthode d'écoute à l'aide du code (voir la GML sur les événements et les moments de séquence pour plus d'informations). REMARQUE: la définition de l'image_index d'une instance directement sur une trame ne déclenchera aucun message de diffusion qui peut être présent sur cette trame de l'image-objet de l'objet. Pour ajouter un message de diffusion à la séquence ou à la chronologie du sprite, cliquez simplement sur le bouton bouton. Cela ouvrira une boîte de dialogue dans laquelle vous pourrez ajouter le message à diffuser: Une fois ajouté, le message sera affiché dans la Dope Sheet (ou dans la vue du cadre de sprite). Pour le modifier, vous devez cliquer sur le bouton droit de la souris sur l'icône de message pour ouvrir une liste de tous les messages qui chevauchent le cadre (il ne peut y avoir qu'un seul message sur un cadre, mais placer plusieurs messages sur des cadres consécutifs les fera se chevaucher visuellement, ce qui rendra plus difficile la sélection de celui que vous voulez et vous pouvez également avoir un message et un moment sur le même cadre), puis en sélectionner un dans cette liste ouvrira la boîte de dialogue de message où vous pourrez le modifier ou le supprimer. Lorsqu'un événement de message de diffusion est déclenché, une carte DS spéciale sera créée et stockée dans la variable intégrée event_data. Cet ID de variable est une variable de portée globale intégrée, mais ne contiendra que des données de carte DS dans l'événement qui l'a déclenché - dans ce cas l'événement de message de diffusion - et renverra -1 à tous les autres moments. Les clés que aura l'événement sont les suivantes: "event_type ": Pour un message diffusé, ce sera la chaîne"sequence event "pour un message envoyé depuis une séquence et"sprite event "pour un message envoyé par un sprite. "message ": Cette clé contient la chaîne de message qui a été reçue. "element_id ": Cette clé renvoie l'ID de l'élément (séquence / sprite / instance) sur un calque dans l'éditeur de salle. Vous pouvez ensuite utiliser cette valeur d'ID pour savoir quel type d'élément a généré le message à l'aide de la fonction layer_get_element_type() et d'utiliser les autres fonctions pertinentes pour le cibler, ou effectuer une action comme jouer un son, selon les besoins. Notez que l'événement de message de diffusion d'une instance recevra plusieurs chaînes pour chaque fois qu'un message de diffusion est envoyé. Vous n'avez pas besoin d'agir sur chacun d'eux et vous pouvez avoir différentes instances à l'écoute de différentes chaînes de diffusion. Cependant, vous pouvez avoir une instance qui écoute les messages qui peuvent être reçus en même temps. Lorsque cela se produit, l'événement sera déclenché plusieurs fois - une fois pour chaque chaîne de message. Voici un bref exemple de la façon dont cet événement peut être vérifié: if event_data[? "event_type"] == "sequence event" {
     switch (event_data[? "message"])     {     case "hit":         audio_play_sound(snd_hit, 0, false);         break;     case "destroy":         sequence_destroy(event_data[? "element_id"]);            break;     } }
   Retour: Séquences Suivant: Le canevas de séquence © Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

