 Variables locales Une variable locale est une variable que nous créons uniquement pour un événement ou une fonction spécifique, puis que nous rejetons lorsque l'événement ou la fonction est terminé. Si elle est créée dans une fonction personnalisée, la variable locale est uniquement disponible pour la fonction, puis supprimée lorsque la fonction est terminée. Pourquoi en aurions-nous besoin? Eh bien, les variables prennent de la place en mémoire et il se peut que nous ne les utilisions que pour une seule opération ou fonction, auquel cas nous n'avons besoin de les avoir en mémoire que pendant le court laps de temps pendant lequel elles sont utilisées. Cela permet de garder votre base de code propre et ordonnée et d'optimiser l'espace mémoire pour les choses qui en ont vraiment besoin. Pour déclarer une variable locale, nous utilisons le var opérateur comme ceci:var _i, _num, _str; _i = 0; _num = 24.5; _str = "Hello World";
     // or
     var _i = 0, _num = 24.5, _str = "Hello World";
     // or
     var _i = 0; var _num = 24.5; var _str = "Hello World"; Toutes les variables ainsi créées seront "oubliées" (c'est-à-dire supprimées de la mémoire) à la fin de l'événement (ou de la fonction) dans lequel elles ont été créées. Vous devez faire attention à ce que le nom que vous donnez var les variables déclarées ne coïncident pas avec une autre variable d'instance dans l'objet exécutant le code, et assurez-vous également que vous n'avez pas l'intention d'utiliser la valeur stockée dans cette variable en dehors de l'événement ou de la fonction dans laquelle vous la déclarez (dans les exemples ci-dessus, tout le var les variables déclarées ont été définies avec le trait de soulignement "_" précédant le nom de la variable, mais cela n'est pas obligatoire et est fait simplement pour rendre plus évident dans le code que nous avons affaire à une variable locale). Cela dit, si vous vous trouvez dans une situation où vous pensez qu'une variable locale devrait être la même qu'une variable d'instance, alors vous pouvez utiliser le self mot-clé pour identifier la variable d'instance comme distincte, par exemple:var hp = 10; with (obj_Enemy) {
     self.hp -= hp; }
   Les variables locales sont beaucoup utilisées dans les programmes, en particulier dans les boucles de comptage itération s, ou lorsque vous utilisez une valeur plusieurs fois en une seule opération qui ne va pas se répéter à nouveau. Voici quelques exemples supplémentaires:var _i = 0; repeat (10)     {
         inventory[_i] = 0;     _i += 1;     }
   Le code ci-dessus crée une variable locale appelée "_i "et le définit sur 0, tous sur la même ligne. Notez que dans les versions précédentes de GameMaker vous deviez d'abord déclarer vos variables locales, puis leur attribuer des valeurs, mais dans cette version, vous pouvez les déclarer et leur attribuer une valeur en même temps. Le code ci-dessus utilise ensuite cette variable pour initialiser un tableau. En tant que variable "_i "ne sera pas utilisé pour d'autres fonctions de l'instance autre que celle-ci, il peut avoir une portée locale. Voici un autre exemple:var _x, _y; _x = x - 32 + irandom(64); _y = y - 32 + irandom(64); instance_create_layer(_x, _y, "Effects", obj_blood); Ici, nous avons utilisé les variables locales "_x " et "_y "pour stocker des coordonnées aléatoires que nous utilisons ensuite pour créer une instance. Dans cet exemple, vous pouvez voir qu'il n'est pas strictement nécessaire que nous utilisions ces variables, mais pour des raisons de lisibilité et de facilité d'utilisation, nous le faisons. C'est BEAUCOUP plus clair et évident ce que nous faisons là-bas que si nous utilisions ce code:instance_create_layer(x - 32 + irandom(64), y - 32 + irandom(64), "Effects", obj_guts); Une autre chose à propos de var les variables locales déclarées doivent être notées... Comme elles sont uniques à l'événement ou à la fonction qui les exécute, elles peuvent également être utilisées dans toutes les autres instances via le code! Cela signifie que nous pouvons utiliser ces variables pour définir et modifier des éléments dans d'autres instances en utilisant le "with() "(voir la section sur la portée des variables pour plus d'informations). Le code lui-même ressemblerait à ceci:var num = instance_number(obj_Enemy); with (obj_Enemy)     {
         if num>10 instance_destroy();     }
   Le code ci-dessus fonctionne car le var La variable déclarée est locale à l' événement (ou à la fonction) dans laquelle elle est contenue, pas à l'instance, ni au monde du jeu, et peut donc être utilisée dans n'importe quelle fonction de n'importe quel objet tant qu'elle est dans le même bloc de code.  Retour: Portée des variables et des variables Suivant: Variables d'instance © Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

