 Entrée de la manette de jeu GameMaker Studio 2 dispose d'un certain nombre de fonctions dédiées qui peuvent être utilisées pour détecter à la fois les commandes analogiques et numériques de plusieurs manettes de jeu connectées. Ces fonctions fonctionnent de manière similaire aux entrées de périphérique, en ce sens que vous pouvez détecter jusqu'à quatre manettes de jeu XInput différentes qui sont connectées (et jusqu'à 8 manettes de jeu DirectInput) et gérer l'entrée de chacune en utilisant les mêmes fonctions. Notez que lorsqu'une manette de jeu est branchée sur votre appareil (ou qu'elle est supprimée), un événement système asynchrone est déclenché dans lequel vous pouvez gérer la situation en utilisant les fonctions appropriées. Les "slots" de la manette de jeu sont indexés à partir de 0, et le slot réel attribué à une manette de jeu dépendra de divers facteurs, notamment le système d'exploitation sur lequel le projet s'exécute. Sur la Windows, les emplacements 0 à 3 inclus ne sont que pour les manettes de jeu Xinput, c'est-à-dire: les contrôleurs Xbox360 et compatibles. Cependant, vous pouvez également vérifier les emplacements 4 à 11 inclus pour les manettes de jeu DirectInput, ce qui signifie que vous pouvez détecter de nombreux autres modèles de contrôleur lorsque vous êtes connecté via ces emplacements. Sur d'autres plates-formes, les pads peuvent être détectés sur n'importe quel slot que le système d'exploitation lui a attribué, ce qui pourrait être le slot 3 ou le slot 20 ou plus. Par exemple, Android appareils Android stockeront des manettes de jeu Bluetooth dans un emplacement, puis réserveront cet emplacement pour cette manette de jeu à l'avenir, qu'elle soit connectée ou non, vous ne pouvez donc pas supposer qu'une seule manette de jeu connectée est connectée à l'emplacement 0, car cela sera probablement pas être le cas. Il est à noter que lorsque vous utilisez des manettes de jeu DirectInput sur Windows ou des manettes de jeu génériques sur d'autres plates-formes, les constantes données ci -dessous peuvent ne pas correspondre exactement aux boutons que vous attendez lorsqu'ils sont enfoncés, en raison de la manière fragmentée et non normalisée dont l'API est mis en œuvre par les fabricants de contrôleurs. Pour cette raison, il est recommandé d'avoir une sorte d'écran de configuration de la manette de jeu dans vos jeux où les gens peuvent redéfinir les boutons de la manette de jeu en fonction de l'entrée de n'importe quel appareil connecté pour atténuer les problèmes (il existe des fonctions de «cartographie» de la manette de jeu qui peuvent vous aider. sur Android Windows Desktop, Ubuntu, macOS et Android, tandis que sur tous les autres, vous devrez le faire vous-même en utilisant du code). Lorsque vous travaillez avec les fonctions de la manette de jeu, l'entrée peut provenir d' axes, de boutons et / ou de chapeaux et GameMaker Studio 2 attribuera à certaines ou à toutes les constantes intégrées suivantes (notez que les «chapeaux» ne sont généralement détectés que sur les contrôleurs non standard ): Constant Description gp_face1 Bouton supérieur 1 (il correspond au «A» sur un contrôleur Xbox 360 et à la croix sur un contrôleur PS)gp_face2 Bouton supérieur 2 (il correspond au "B" sur un contrôleur Xbox 360 et au cercle sur un contrôleur PS)gp_face3 Bouton supérieur 3 (il correspond au «X» sur un contrôleur Xbox 360 et au carré sur un contrôleur PS)gp_face4 Bouton supérieur 4 (il correspond au "Y" sur un contrôleur Xbox 360 et au triangle sur un contrôleur PS)gp_shoulderl Bouton d'épaule gauche gp_shoulderlb Gâchette d'épaule gauche gp_shoulderr Bouton d'épaule droit gp_shoulderrb Gâchette d'épaule droite gp_select Le bouton de sélection (c'est le bouton PS sur un contrôleur DS4)gp_start Le bouton de démarrage (c'est le bouton "options" sur une manette PS4)gp_stickl Le joystick gauche enfoncé (comme un bouton)gp_stickr Le joystick droit enfoncé (comme un bouton)gp_padu D-pad vers le haut gp_padd D-pad vers le bas gp_padl D-pad gauche gp_padr D-pad droit gp_axislh Axe horizontal du joystick gauche (analogique)gp_axislv Axe vertical du joystick gauche (analogique)gp_axisrh Axe horizontal du joystick droit (analogique)gp_axisrv Axe vertical du joystick droit (analogique) Pour mieux comprendre exactement quelle partie du contrôleur chaque constante représente, vous pouvez vous référer à l'image suivante d'une manette de jeu Xinput standard: Vous trouverez ci-dessous une liste de toutes les fonctions de la manette de jeu: gamepad_is_supportedgamepad_is_connectedgamepad_get_guidgamepad_get_device_countgamepad_get_descriptiongamepad_get_button_thresholdgamepad_get_axis_deadzonegamepad_get_optiongamepad_set_button_thresholdgamepad_set_axis_deadzonegamepad_set_vibrationgamepad_set_colourgamepad_set_optiongamepad_axis_countgamepad_axis_valuegamepad_button_checkgamepad_button_check_pressedgamepad_button_check_releasedgamepad_button_countgamepad_button_valuegamepad_hat_countgamepad_hat_value Les fonctions de manette de jeu suivantes existent également et sont utilisées pour remapper les constantes intégrées aux entrées physiques directes d'une manette de jeu donnée. Ces fonctions sont uniquement destinées aux plates-formes cibles Windows Desktop, Ubuntu, macOS et Android Windows, elles ne seront valables que pour les périphériques d'entrée directe. Alors que GameMaker Studio 2 est livré avec des mappages pour un certain nombre de manettes de jeu différentes basées sur SDL Gamepad Controller DB, cependant, en raison du grand nombre de types et de marques de contrôleurs, il est impossible de mapper les GML aux entrées correctes pour chaque marque et model, donc avec ces fonctions, vous avez la possibilité de créer vos propres mappages personnalisés. gamepad_get_mappinggamepad_test_mappinggamepad_remove_mapping Il est à noter que les manettes de jeu Direct Input sont exécutées en mode coopératif, ce qui signifie que votre jeu n'y a accès que lorsqu'il s'agit de l'application au premier plan, ce qui entraînera la «perte» des contrôleurs Direct Input si le jeu perd le focus, puis "trouvé" à nouveau quand il revient dans le focus (cela peut être détecté dans l'événement système et traité). De même, aucune entrée des manettes de jeu ne sera détectée tant que le jeu n'est pas au point, et nous vous recommandons d'utiliser la fonction os_is_paused() ou window_has_focus() pour le détecter et mettre le jeu en pause ou quelque chose de similaire, car tout bouton maintenu enfoncé au moment où le jeu perd le focus maintiendra l'état maintenu enfoncé jusqu'à ce que le jeu retrouve le focus. Compatibilité La liste suivante montre la compatibilité actuelle entre les plates-formes (notez que cela changera avec les futures mises à jour): Windows est entièrement pris en charge avec un maximum de 12 appareils connectés autorisés à la fois (numérotés de 0 à 11, 0 - 3 étant des appareils XInput et 4 - 11 étant DirectInput). Le remappage des constantes de contrôleur est également autorisé. macOS est pris en charge avec un maximum de 4 appareils connectés autorisés à la fois, et ces appareils peuvent UNIQUEMENT être du type Playstation 3 ou Xbox 360. Veuillez noter que l'option «Créer pour Mac AppStore» dans les options de jeu Mac doit être désactivée pour que le support de coussin fonctionne. Le remappage des constantes de contrôleur est également autorisé. Ubuntu prend également en charge l'entrée Gamepad, mais vous devrez peut-être installer des bibliothèques supplémentaires à partir du référentiel Ubuntu Vous pouvez le faire facilement en ouvrant un terminal de ligne de commande et en tapant ce qui suit (cela installera la prise en charge de l'interface graphique pour le joystick / gamepad ainsi que l'API joystick / gamepad elle-même - le remappage des constantes du contrôleur n'est pas autorisé):sudo apt-get install jstest-gtk sudo apt-get install joystick. Les jeux HTML5 utilisant des manettes de jeu sont pris en charge par la plupart des principaux navigateurs, à l'exception de Safari. Le remappage des constantes de contrôleur n'est pas autorisé. La prise en charge de la manette de jeu iOS L'axe gauche correspond au contrôleur de bâton (bien que l'entrée soit numérique, pas analogique), les quatre boutons «face» correspondent aux boutons avant de l'armoire, et les quatre boutons d'épaule correspondent à ceux à l'arrière de l'armoire. Android exportation Android (et Amazon Fire ) prend en charge les contrôleurs NYKO et les contrôleurs Bluetooth génériques, mais uniquement lorsqu'ils sont activés, ce qui signifie que vous devrez cocher l'option iCade / Bluetooth dans la section Général des options de jeu Android Ils nécessitent le niveau d'API 12 pour fonctionner pleinement et il convient de noter que GameMaker Studio 2 enregistrera comme connecté tous les appareils Bluetooth avec lesquels votre appareil est couplé, qu'il soit réellement connecté ou non. Par conséquent, cela doit être pris en compte lors de l'attribution et de la vérification des "slots". Notez que le remappage des constantes de contrôleur est également autorisé. Sur PS4, si vous souhaitez utiliser le suivi du pavé tactile, vous devez utiliser le device_mouse_* boutons. Le remappage des constantes de contrôleur n'est pas autorisé. Sur les Windows UWP, XBoxOne et Nintendo Switch, les manettes de jeu sont entièrement prises en charge, mais le remappage des constantes de contrôleur n'est pas autorisé. Idéalement, sur toutes les plates-formes cibles, vous voulez énumérer une liste des «emplacements» de manette de jeu disponibles, puis les vérifier pour voir si des périphériques sont détectés, quelque chose comme ceci: var _maxpads = gamepad_get_device_count(); for (var i = 0; i < _maxpads; i++)     {
         if (gamepad_is_connected(i))         {
             // do stuff with pad "i"         }
         }
   Retour: Entrée de jeu Suivant: Clés virtuelles et claviers virtuels © Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

