 steam _set_stat_avg_rate Cette fonction vous permet de définir un type de statistique moyenne avec un effet de "fenêtre glissante" sur la moyenne. La valeur "session_count" est la valeur actuelle que vous souhaitez faire la moyenne, tandis que "session_length" est le temps de jeu depuis le dernier appel à la fonction. Veuillez consulter l' exemple étendu ci-dessous pour plus de détails sur la façon dont cela peut être utilisé. Syntaxe:steam_set_stat_avg_rate(stat_name, session_count, session_length); Argument Description stat_name Le nom de la statistique à définir (une chaîne). session_count La valeur pour obtenir la moyenne de (un nombre réel) session_length Le temps écoulé depuis la dernière fois que la statistique a été définie (un nombre réel). Retour:N/A Exemple étendu: Étant donné que la fonction statistique moyenne peut être complexe à comprendre, nous illustrerons son utilisation avec l'exemple suivant. Prenons le cas où vous souhaitez suivre une statistique moyenne, telle que "Points gagnés par heure". Une approche serait d'avoir deux statistiques: une statistique entière, "TotalPoints", et une statistique flottante "TotalPlayTimeHours", puis diviser le total des points par le temps total pour obtenir la valeur "Points par heure". Cependant, une fois que le joueur a accumulé une quantité significative de temps de jeu, la moyenne calculée changera extrêmement lentement, et plus l'utilisateur joue au jeu, moins cette moyenne sera réactive. Si l'utilisateur a passé 100 heures à jouer au jeu, la moyenne calculée «retardera» d'environ 50 heures de cela, et s'il augmente ses compétences, il ne verra pas l'augmentation des «points par heure» à laquelle il s'attend. Pour contourner cela, nous pouvons utiliser une "fenêtre glissante" pour calculer uniquement les "Points par heure" pour les 10 dernières heures jouées. Donc, pour utiliser cette fonction, nous aurions besoin de créer une Steam (dans le panneau de configuration du jeu sur l'Atelier) appelée "AvgPointsPerHour" et de définir sa propriété Window sur 10. Maintenant, dans votre jeu, vous devez ajouter des paramètres globaux. variables dans une instance au début:global.Points = 0; global.Time = 0; Vous auriez alors un objet contrôleur pour compter la variable globale "Time" dans une alarme (par exemple) chaque seconde, tandis que votre jeu affecterait la variable globale "Points". À intervalles réguliers pendant la lecture (encore une fois, dans un objet contrôleur, peut-être dans une alarme, ou à intervalles de l'interrogation de la valeur "Time"), vous définiriez la statistique comme ceci:steam_set_stat_avg_rate("AvgPointsPerHour", global.Points, (global.Time / 3600)); global.Points = 0; global.Time = 0; Notez que nous divisons le temps par 3600 car nous voulons le temps en heures et non en secondes, puis nous remettons à 0 la variable globale "Points" et la variable globale "Time" pour que la prochaine fois que la fonction soit appelée, nous obtenions une nouvelle moyenne pour la statistique. Maintenant, ce que Steam va faire est de prendre cette valeur que vous avez envoyée et de créer une valeur moyenne sur le temps qui a été défini pour notre «fenêtre».  Retour: Réalisations et statistiques Suivant: steam _get_stat_int © Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

