json_decode IMPORTANT! Cette fonction - tout en étant toujours valide - a été supplantée par la fonction json_parse(), et nous vous recommandons de n'utiliser cette fonction que pour le support hérité. JSON (JavaScript Object Notation) est un format d'échange de données léger qui est facile à lire et à écrire, pour les personnes et les machines. Il est construit sur deux structures de base: Une collection de paires nom / valeur, appelée DS Map dans GameMaker Studio 2 mais également appelé «dictionnaire» ou «objet». Une liste ordonnée de valeurs, appelée DS List dans GameMaker Studio 2 mais cela peut également être appelé «tableau» ou «séquence». Avec cette fonction, vous pouvez décoder un morceau de JSON et le convertir en un DS Map, prêt à être utilisé dans GameMaker Studio 2. Si le JSON à décoder nécessite une hiérarchie de listes et de cartes dans la carte DS centrale, celles-ci sont également décodées et également créées pour vous, à l'aide des règles suivantes (notez que ces règles s'appliquent uniquement à la structure de niveau supérieur): JSON est une valeur unique - renvoie une carte DS avec une seule entrée "par défaut" qui est la valeur JSON est un tableau d'objets ou de valeurs - renvoie une carte DS avec une seule entrée "par défaut" qui est une liste DS des objets ou des valeurs JSON est un objet - renvoie une carte DS contenant les entrées d'objet REMARQUE: lors du décodage de tableaux JSON, il existe une carte avec la clé «par défaut» UNIQUEMENT lorsqu'un tableau est la structure de niveau supérieur, et UNIQUEMENT pour ce tableau de niveau supérieur. Les listes internes se décodent directement dans la carte DS sans être incluses dans une carte DS. REMARQUE: si vous avez écrit des GameMaker dans le niveau supérieur, ou en tant que contenu d'une carte DS ou d'une liste DS, ceux-ci seront décodés sous forme de listes DS et non de tableaux. Normalement, vous saurez sur quelles clés le JSON décode, mais sinon, vous pouvez utiliser le ds_map_size(), ds_map_find_first() et ds_map_find_next() fonctions pour analyser la carte et obtenir les informations nécessaires. REMARQUE: GameMaker Studio 2 crée les cartes et listes DS nécessaires à partir du JSON, et pour le nettoyage, il vous suffit de supprimer la carte ou la liste de niveau supérieur GameMaker Studio 2 supprimera automatiquement de la mémoire toutes les cartes et listes en dessous. IMPORTANT: vous ne pouvez pas avoir de numéros 64 bits dans votre JSON, car ils ne fonctionneront pas correctement car ils ne sont pas gérés par le format JSON. Syntaxe:json_decode(string) Argument Description string La chaîne de format JSON que vous transmettez à la fonction pour le décodage Retour:DS map id or -1 if it fails Exemple:var resultMap = json_decode(requestResult); var list = ds_map_find_value(resultMap, "default"); var size = ds_list_size(list); for (var n = 0; n < ds_list_size(list); n++;)    {
        var map = ds_list_find_value(list, n);    var curr = ds_map_find_first(map);    while (is_string(curr))       {
           global.Name[n] = ds_map_find_value(map, "name");       curr = ds_map_find_next(map, curr);       }
        }
     ds_map_destroy(resultMap);
   Le code ci-dessus décodera une chaîne JSON et l'analysera pour générer un tableau global.  Retour: Encodage de fichiers Suivant:json_stringify © Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

