http_request Avec cette fonction, vous pouvez créer une requête d'en-tête HTTP pour définir les paramètres de fonctionnement d'une transaction HTTP, qui peut être utilisée pour de nombreuses choses comme (par exemple) l'authentification via les en-têtes HTTP si vous utilisez des API RESTful. La fonction nécessite l'adresse IP complète du serveur à partir de laquelle effectuer la requête ainsi que le type de requête à effectuer (sous forme de chaîne, voir la remarque ci-dessous): "GET", "HEAD", "POST", "PUT", " SUPPRIMER "," TRACER "," OPTIONS "ou" CONNEXION ". Vous devrez également fournir un DS map de paires clé / valeur (sous forme de chaînes, où la clé est le champ d'en-tête et la valeur est les données requises pour l'en-tête), et l'argument final est une chaîne de données facultative que vous pouvez ajouter à la demande, et si elle n'est pas nécessaire alors il peut être 0 ou une chaîne vide "". Notez que vous pouvez également envoyer un tampon (voir la section sur les tampons pour plus de détails), auquel cas le dernier argument serait le "handle" du tampon à envoyer. REMARQUE: les en-têtes HTTP suivent normalement le format «clé: valeur», mais étant donné que GMS crée ces paires pour vous à partir de ds_map, il n'est pas nécessaire d'inclure les deux points «:» dans votre clé de carte ou vos chaînes de valeur. REMARQUE: lorsque vous utilisez un tampon pour l'argument body, si la position de recherche de la mémoire tampon est au début (0), aucun corps n'est envoyé et la mémoire tampon est remplie avec la réponse de l'appel http, mais si la position de recherche de la mémoire tampon est non- zéro, alors le contenu de la chaîne de tampon est envoyé en tant que corps. REMARQUE: vous devez savoir qu'en raison de la protection XSS dans les navigateurs, les demandes et les tentatives de chargement de ressources à partir de plusieurs domaines sont bloquées et peuvent sembler renvoyer des résultats vides. Veuillez consulter la partie sur les problèmes interdomaines pour plus de détails. Cet événement générera un "rappel" qui est capté par tout événement HTTP, auquel cas il générera un DS Map (plus communément appelé «dictionnaire») qui est exclusif à cet événement et est stocké dans la variable spéciale async_load. Cette carte DS a les deux touches suivantes liées à la fonction de requête: id: l'ID renvoyé par la commande. Si vous déclenchez une série de http_ demandes, vous devez savoir à laquelle vous obtenez la réponse, et vous utiliserez donc cette valeur pour la comparer à la valeur que vous avez stockée lorsque vous avez initialement envoyé la demande pour trouver la bonne. response_headers: si cette valeur a une valeur supérieure ou égale à 0, elle contient une mappe DS qui contient les en-têtes HTTP renvoyés avec la réponse à la requête HTTP. Syntaxe:http_request(url, method, header_map, body); Argument Description url L'adresse Web du serveur dont vous souhaitez obtenir des informations method La méthode de requête (normalement "POST" ou "GET", mais toutes les méthodes sont prises en charge) header_map Un ds_map avec les champs d'en-tête requis body Les données à transmettre suivant les en-têtes (peut être un handle de tampon binaire) Retour:Real Exemple:var map = ds_map_create(); ds_map_add(map, "Host", "225.0.0.97:3000"); ds_map_add(map, "Connection", "keep-alive"); ds_map_add(map, "Content-Length", "169"); ds_map_add(map,
    "Cache-Control", "max-age=0"); ds_map_add(map, "Authorization", "Basic eW95b19hZG1pbjpjNG5lZmllbGQ="); ds_map_add(map, "Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8");    ds_map_add(map, "User-Agent", "Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.57 Safari/537.36"); ds_map_add(map, "Content-Type", "application/x-www-form-urlencoded");    ds_map_add(map, "Accept-Encoding", "gzip,deflate,sdch"); ds_map_add(map, "Accept-Language", "en-GB,en-US;q=0.8,en;q=0.6"); ds_map_add(map, "Cookie", "request_method=GET; _InAppPurchases_session=69bb6ef6eec2b");    var data="utf8=%E2%9C%93&authenticity_token=kPmS14DcYcuKgMFZUsN3XFfj3mhs%3D&product%5Bname%5D=CatchTheHaggis&product%5Bproduct_id%5D=http_test&commit=Create+Product"; request = http_request("http:225.0.0.97:3000/products",
    "POST", map, data); Le code ci-dessus crée une carte DS avec les en-têtes HTTP appropriés pour la fonction, puis crée une chaîne de données à utiliser car il s'agit d'une requête POST. Enfin, la fonction est appelée, sa valeur ID étant stockée dans la variable "request" pour vérifier l'événement asynchrone HTTP.  Retour: HTTP Suivant:http_get © Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

