http_post_string En informatique, une demande de publication est utilisée lorsque le client a besoin d'envoyer des données au serveur dans le cadre de la demande de récupération, par exemple lors du téléchargement d'un fichier ou de la soumission d'un formulaire rempli, et il en va de même pour cette fonction dans GameMaker Studio 2. Contrairement à la http_get() méthode de requête où seule une URL est envoyée au serveur, http_post_string() inclut également une chaîne qui est envoyée au serveur et peut entraîner la création d'une nouvelle ressource ou la mise à jour d'une ressource existante ou les deux. Il convient de noter que les paramètres de requête HTTP (les bits parfois «cloués» à la fin d'une URL lorsque vous soumettez un formulaire sur une page Web) sont parfaitement acceptables lors de l'utilisation de cette fonction également. REMARQUE: vous devez savoir qu'en raison de la protection XSS dans les navigateurs, les demandes et les tentatives de chargement de ressources à partir de plusieurs domaines sont bloquées et peuvent sembler renvoyer des résultats vides. Veuillez consulter la partie sur les problèmes interdomaines pour plus de détails. Cet événement générera un "rappel" qui est capté par tous les événements HTTP, auquel cas il générera une carte DS (plus communément appelée "dictionnaire") qui est exclusive à cet événement et est stockée dans la variable spéciale async_load. Cette carte DS contiendra des valeurs différentes selon que des données sont renvoyées ou non. Par exemple, si vous avez demandé un fichier, l'événement se déclenchera plusieurs fois lorsque chaque paquet de données est reçu afin que vous puissiez afficher une barre de progression, par exemple. La structure générale de la carte DS sera la suivante: id: l'ID renvoyé par la commande. Si vous déclenchez une série de http_ demandes, vous devez savoir à laquelle vous obtenez la réponse, et vous utiliserez donc cette valeur pour la comparer à la valeur que vous avez stockée lorsque vous avez initialement envoyé la demande pour trouver la bonne. status: renvoie une valeur inférieure à 0 pour une erreur, 0 pour complet et 1 pour recevoir des paquets (voir ci-dessous pour plus de détails). résultat: les données reçues (chaîne uniquement). url: l' URL complète que vous avez demandée. http_status: Le code d'état http brut (si disponible). Cela renvoie le code d'état Web standard pour la plupart des navigateurs, par exemple: 304 pour "Non modifié" ou 204 pour "Aucun contenu", etc... S'il y a plusieurs paquets retournés à votre jeu, la touche de rappel "status" renverra 1, auquel cas la carte DS aura les clés supplémentaires suivantes: "contentLength": C'est la taille du fichier que le serveur Web a dit que vous devriez vous attendre à recevoir (peut être -1 si le serveur ne renvoie pas ces données). "sizeDownloaded": la taille des données déjà téléchargées. Syntaxe:http_post_string(url, string); Argument Description url L'adresse Web du serveur dont vous souhaitez obtenir des informations string La chaîne que vous souhaitez envoyer à l'URL spécifiée Retour:Real Exemple étendu: Le http_post_string() La fonction peut être appelée à partir de n'importe quel événement, et comme elle est asynchrone, le rappel peut être presque instantané ou prendre plusieurs secondes. L'appel de la fonction est simple et ressemblerait à ceci:var str = "name=" + global.player_name + "&score=" + string(global.player_score); post = http_post_string("http://www.angusgames.com/game?game_id=" + string(global.game_id), str); Le code ci-dessus envoie une demande de récupération à l'URL spécifiée avec les paramètres donnés ainsi que l'envoi des données supplémentaires (nom du joueur et score au format URL encodé) stockées dans la variable str. Cela déclenchera tous les événements Http asynchrones définis si un rappel est reçu, et vous pouvez vérifier l '«id» renvoyé par rapport à celui stocké dans la variable post pour vous assurer que vous exécutez le bon code si vous avez utilisé divers http_post_string() les fonctions. L'exemple de code suivant montre comment procéder:var r_str = "null"; if ds_map_find_value(async_load, "id") == post     {
         if ds_map_find_value(async_load, "status") == 0         {
             r_str = ds_map_find_value(async_load, "result");         }
         }
   Le code ci-dessus vérifiera d'abord l'identifiant de la carte DS créée, puis vérifiera l'état du rappel. Si la valeur est égale à 0 (signalant le succès), le résultat du rappel sera alors stocké dans une variable pour une utilisation future, sinon la variable contiendra simplement une valeur par défaut (dans ce cas "null").  Retour: HTTP Suivant:http_get_request_crossorigin © Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

