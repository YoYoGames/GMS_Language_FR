mp_grid_add_cell Avec cette fonction, nous pouvons marquer des cellules individuelles dans la grille MP donnée comme étant "interdites", ce qui signifie que les fonctions de recherche de chemin ne les croiseront jamais. Désormais, vous travaillez normalement en coordonnées de pièce x / y, et non en coordonnées de cellule de grille MP. Considérons donc l'image suivante qui montre comment les deux peuvent être corrélés: Comme vous pouvez le voir, mp_grid est numéroté comme une série de cellules (commençant à 0,0 dans le coin supérieur gauche), et lorsque vous placez cette grille sur la pièce, il y a une corrélation directe entre les coordonnées de la pièce (qui commencent également à 0, 0 en haut à gauche) et les cellules de la grille. Dans l'image, vous pouvez voir qu'une instance à la position 260,130 tombe sur la cellule de grille 8,4. Vous pouvez calculer mathématiquement la cellule exacte sur laquelle une position atterrit facilement en divisant le nombre par la résolution de la grille, puis en arrondissant vers le bas ou, si vous utilisez la puissance de 2 résolutions de grille (comme 8, 16, 32, etc.), vous peut utiliser les opérateurs au niveau du bit. Il convient de noter que l'opération au niveau du bit est plus rapide et l'exemple ci-dessous montre les deux méthodes. Syntaxe:mp_grid_add_cell(id, h, v); Argument Description id Index du mp_grid à utiliser h Position horizontale de la cellule dans la grille v Position verticale de la cellule dans la grille Retour:N/A Exemple:with (obj_Wall)     {
         mp_grid_add_cell(grid, floor(x / 32), floor(y / 32));     }
     with (obj_Door)     {
         mp_grid_add_cell(grid, x>>5, y>>5);     }
   Le code ci-dessus fera que tous les "obj_Wall" et tous les obj_Door ajoutent leurs positions de cellule équivalentes dans le mp_grid indexé dans la variable "grid". Dans la première partie de l'exemple, cela se fait en prenant les coordonnées x / y de l'objet et en les divisant par la résolution de la grille (en utilisant floor pour conserver les valeurs sous forme d'entiers), et dans la deuxième partie (puisque la résolution de la grille est une puissance de 2), cela se fait en décalant les coordonnées x, y de 5 places vers la droite.  Retour: Planification de mouvement Suivant:mp_grid_add_instances © Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

