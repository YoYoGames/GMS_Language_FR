skeleton_bone_state_get Votre animation squelettique est composée d'un certain nombre de "os", que vous aurez définis et nommés dans votre programme d'animation, et cette fonction peut être utilisée pour obtenir certaines données pour l'os nommé à tout moment. Notez que ces données font référence à la pose actuelle du squelette, en fonction du jeu d'animations utilisé, et que la fonction nécessite une carte DS créée précédemment, qui aura alors les clés suivantes et leurs valeurs équivalentes après l'appel de la fonction: "x": la position x locale de l'os par rapport à l'os parent. "y": la position y locale de l'os par rapport à l'os parent. "angle": La rotation locale de l'os par rapport à l'os parent. "xscale": l'échelle horizontale locale de l'os, en référence à l'os parent. «yscale»: l'échelle verticale locale de l'os, en référence à l'os parent. "worldScaleX": La magnitude (toujours positive) de l'échelle mondiale X (il s'agit d'une valeur en lecture seule). "worldScaleY": La magnitude (toujours positive) de l'échelle mondiale Y (il s'agit d'une valeur en lecture seule). "worldAngleX": La rotation du monde pour l'axe X (il s'agit d'une valeur en lecture seule). "worldAngleY": La rotation du monde pour l'axe Y (il s'agit d'une valeur en lecture seule). "worldX": La position X du monde (il s'agit d'une valeur en lecture seule). "worldY": la position Y du monde (il s'agit d'une valeur en lecture seule). "appliedAngle": C'est la rotation locale utilisée pour poser les os du squelette. "parent": le nom (une chaîne) de l'os parent. Les données cartographiques renvoyées sont similaires à celles renvoyées pour la pose par défaut lorsque vous utilisez skeleton_bone_data_get(), ce n'est que maintenant que vous avez les clés "monde" supplémentaires. Celles-ci font référence à la position de l'os par rapport à la racine (origine) du sprite d'animation squelettique, et les valeurs renvoyées ne prennent en compte aucune mise à l'échelle ou rotation qui a été effectuée en définissant les variables de sprite intégrées telles que image_xscale ou image_angle. Les valeurs mondiales sont en lecture seule et ne peuvent pas être définies. Cette fonction est fournie pour que vous puissiez "intercepter" les données d'animation et les modifier avant qu'elles ne soient dessinées à l'écran, et en tant que telle, vous voudriez l'utiliser dans l' événement Autre - Mise à jour de l'animation, puisque cet événement est déclenché juste avant le dessin Événements. Syntaxe:skeleton_bone_state_get(bone, map); Argument Description bone Le nom (sous forme de chaîne) de l'os. map La carte DS (créée précédemment) qui stocke les données d'os. Retour:N/A Exemple:var map = ds_map_create(); skeleton_bone_state_get("head", map); var xx = ds_map_find_value(map, "worldX"); var yy = ds_map_find_value(map, "worldY"); var deltax = mouse_x - (x + xx); var deltay
    = mouse_y - (y + yy); var angle = -radtodeg(arctan2(deltay, deltax)); ds_map_replace(map, "angle", angle); skeleton_bone_state_set("head", map); ds_map_destroy(map);
   Le code ci-dessus crée une carte DS, puis la remplit avec les données de l'os nommé "tête". Il extrait ensuite la position mondiale de l'os et utilise ces données pour définir «l'angle» de l'os afin de suivre la position de la souris dans le jeu.  Retour: Os Suivant:skeleton_bone_state_set © Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

