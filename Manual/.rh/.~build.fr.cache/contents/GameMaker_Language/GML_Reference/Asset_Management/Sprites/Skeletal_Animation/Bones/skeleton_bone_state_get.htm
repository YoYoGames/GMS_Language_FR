
  
  état du squelette_bone_get
  Votre animation squelettique est composée d'un certain nombre d'"os", que vous aurez définis et auxquels vous aurez donné un nom dans votre programme d'animation. Cette fonction peut être utilisée pour obtenir certaines données pour l'os nommé à tout moment. Notez que ces données font référence
    à la pose actuelle du squelette, en fonction du jeu d'animation utilisé, et la fonction nécessite une carte DS créée au préalable, qui aura les clés suivantes et leurs valeurs équivalentes après l'appel de la fonction : 1.
    valeurs équivalentes après l'appel de la fonction :
  
    "x" : La position x locale de l'os par rapport à l'os parent.
    "y" : La position locale y de l'os par rapport à l'os parent.
    "angle" : La rotation locale de l'os par rapport à l'os parent.
    "xscale" : L'échelle horizontale locale de l'os, en référence à l'os parent.
    "yscale" : L'échelle verticale locale de l'os, en référence à l'os parent.
    "worldScaleX" : La magnitude (toujours positive) de l'échelle mondiale X (cette valeur est en lecture seule ).
    "worldScaleY" : La magnitude (toujours positive) de l'échelle mondiale Y (cette valeur est en lecture seule ).
    "worldAngleX" : La rotation du monde pour l'axe X (cette valeur est en lecture seule ).
    "worldAngleY" : La rotation du monde pour l'axe Y (cette valeur est en lecture seule ).
    "worldX" : La position X du monde (cette valeur est en lecture seule ).
    "worldY" : La position Y du monde (cette valeur est en lecture seule ).
    "appliedAngle" : Il s'agit de la rotation locale utilisée pour poser les os du squelette.
    "parent" : Le nom (une chaîne de caractères) de l'os parent.
  
  Les données de carte retournées sont similaires à celles retournées pour la pose par défaut lorsque vous utilisez la méthode skeleton_bone_data_get()mais vous avez maintenant les clés supplémentaires "world". Celles-ci font référence à la position de l'os
    par rapport à la racine (origine) du sprite d'animation du squelette, et les valeurs renvoyées ne prennent pas en compte les mises à l'échelle ou les rotations qui ont été effectuées en définissant les variables intégrées du sprite comme image_xscale ou image_angle.
    Les valeurs du monde sont en lecture seule et ne peuvent pas être définies.
  Cette fonction est fournie pour que vous puissiez "intercepter" les données d'animation et les modifier avant qu'elles ne soient dessinées à l'écran. En tant que telle, vous voudrez l'utiliser dans l'événement Other - Animation Update, puisque cet événement est déclenché juste avant les événements Draw.
   
  Syntaxe :
  skeleton_bone_state_get(bone, map) ;
  
    
      
        Arguments
        Description
      
      
        os
        Le nom (sous forme de chaîne) de l'os.
      
      
        carte
        La carte DS (précédemment créée) qui stocke les données relatives aux os.
      
    
  
   
   
  Les retours :
  N/A
   
  Exemple :
  var map = ds_map_create() ; skeleton_bone_state_get("head", map) ; var xx = ds_map_find_value(map, "worldX") ; var yy = ds_map_find_value(map, "worldY") ; var deltax = mouse_x - (x + xx) ; var deltay
    = mouse_y - (y + yy) ; var angle = -radtodeg(arctan2(deltay, deltax)) ; ds_map_replace(map, "angle", angle) ; skeleton_bone_state_set("head", map) ; ds_map_destroy(map) ;
  
  Le code ci-dessus crée une carte DS et la remplit avec les données de l'os nommé "head". Il extrait ensuite la position mondiale de l'os et utilise ces données pour définir l'"angle" de l'os afin de suivre la position de la souris dans le jeu.
    jeu.
   
   
   
  
    
      
        Dos : Bones
        Suivant : skeleton_bone_state_set
      
    
    Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

