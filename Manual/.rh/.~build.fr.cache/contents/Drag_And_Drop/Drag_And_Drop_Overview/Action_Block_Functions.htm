 Fonctions de script de bloc d'action L'un des actifs les plus importants du navigateur d'actifs est l'actif Script. Les scripts sont des actifs spéciaux en ce sens qu'ils sont essentiellement des "conteneurs" pour des fonctions définies par l'utilisateur et ne sont pas eux-mêmes appelés directement par vous dans vos jeux. Tous les scripts ont une portée globale et seront exécutés automatiquement par GameMaker démarrage de votre jeu, vous pouvez donc les utiliser pour définir les variables globales et les fonctions que vous souhaitez utiliser tout au long de votre jeu. Chaque DnD™ peut avoir une ou plusieurs fonctions définies par l'utilisateur, et ces fonctions sont créées à l'aide de l'action Déclarer une nouvelle fonction: Les fonctions que vous définissez ici auront une portée globale et agiront comme n'importe quelle DnD™ intégrée, c'est-à-dire: elles peuvent prendre des valeurs différentes - ou aucune - appelées argument s (ou paramètres), puis effectuer une tâche, en retournant une valeur ou ne renvoyant rien comme requis. Vous appelleriez alors la fonction dans vos jeux en utilisant l' appel de fonction action, qui ressemble à ceci: Pour créer un DnD™, il vous suffit d'utiliser le bouton droit de la souris n'importe où dans le navigateur de ressources et sélectionnez Créer puis Script. Cela créera un nouveau DnD™ et ouvrira la fenêtre de l'éditeur: Vous pouvez nommer le script en cliquant avec le bouton droit de la souris dessus dans le navigateur de ressources et en sélectionnant Renommer (ou en utilisant un double clic gauche lent ), mais notez que le nom du script doit être conforme aux règles générales des actifs, ils doivent donc commencer par une lettre et ne contenir que des lettres, des chiffres ou le symbole sous-barre "_". Votre script sera également pré- rempli avec une action Déclarer une nouvelle fonction, prête à être remplie, et vous pouvez ajouter plus de déclarations de fonction si nécessaire (un seul script peut contenir plusieurs fonctions, ce qui est utile pour regrouper des fonctions avec des ou utilisation connectée ensemble). Comme mentionné ci-dessus, vous pouvez passer un certain nombre d'arguments à une fonction, et elle les utilisera pour exécuter la tâche pour laquelle vous l'avez écrite. Pour mieux comprendre cela, prenez - par exemple - l'une des actions intégrées et réfléchissez à son fonctionnement... vous la placez dans un événement et fournissez un certain nombre de valeurs et votre instance fera quelque chose. Les fonctions définies par l'utilisateur sont exactement les mêmes, la seule différence étant que vous les écrivez. Lors de la définition d'une nouvelle fonction, vous lui donnez un nom et définissez également le nom de tous les arguments qu'elle prend, si elle en prend (les fonctions ne peuvent accepter aucun argument ou plusieurs arguments selon ce dont vous avez besoin). Si vous donnez des noms d'argument, ceux-ci seront utilisés dans les actions que la fonction appelle en tant que variables locales contenant les valeurs d'entrée de la fonction. Il est également recommandé d'ajouter un commentaire pour l'action qui explique ce qu'elle fait, en suivant les règles JS Doc. Par exemple, considérez cette fonction set_vec(): Pour appeler le script ci-dessus, utilisez simplement l' action Appeler une fonction, comme ceci: Non seulement vous pouvez passer des arguments dans une fonction, mais vous pouvez également demander à une fonction de renvoyer une valeur également (en utilisant le paramètre Return action), vous pouvez donc les utiliser pour (par exemple) créer des méthodes de calcul ou rendre un ID d'instance après une détection de collision complexe ou un certain nombre de choses. Veuillez noter, cependant, que l'utilisation de return met fin à la fonction, et donc aucune action placée après son utilisation ne sera exécutée, ce qui signifie qu'une certaine réflexion doit être menée sur la manière dont vos fonctions sont structurées. Vous trouverez ci-dessous une fonction de Drag and Drop qui renvoie une valeur: La fonction ci-dessus vérifie simplement toutes les instances d'une pièce pour voir ce que leur object_index est et si l'un d'entre eux est l'objet joueur, la fonction retournera true (fin de l'appel de fonction) ou false. Vous appelleriez cette fonction comme ceci: Donc, nous appelons la fonction et lui faisons créer une variable temporaire (locale) pour stocker la valeur retournée (qui dans ce cas est soit true ou false ), puis cette variable est vérifiée et une action est effectuée. DnD fonctions pour vos scripts DnD™, vous pouvez utiliser toutes les mêmes actions que vous le feriez lors de l'ajout d'actions dans un événement d'objet, et vous pouvez même appeler des fonctions à partir de fonctions, et ainsi créer un code d'action plus «modulaire». Construire des scripts avec des fonctions de cette manière peut vous faire gagner beaucoup de temps en créant les mêmes séquences d'action et peut également aider à rendre vos séquences d'action plus faciles à lire et à déboguer.  Retour: Index Suivant: Modification du DnD™ en © Copyright YoYo Games Ltd. 2021 Tous droits réservés
  
  
  

